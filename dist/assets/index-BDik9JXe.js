const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/NoRolePage-CRMmIJLf.js","assets/radix-ui-C5McgZzy.js","assets/react-vendor-Crp7TieP.js","assets/refine-core-BjumCBFr.js","assets/utils-ByUfgEiL.js","assets/refine-ui-CTAQEfRS.js","assets/forms-CRFkyq38.js","assets/ui-utils-BI7W93w0.js","assets/tables-CaG-tRN8.js","assets/LoginPage-j9REOJLa.js","assets/NarrowCol-D-FbsSQT.js","assets/RegisterFlow-DYSF4I8j.js","assets/ForgotPasswordPage-G6-LJvUx.js","assets/UpdatePasswordPage-BNfnt-yp.js"])))=>i.map(i=>d[i]);
var $a=Object.defineProperty;var Pa=(s,t,r)=>t in s?$a(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var fe=(s,t,r)=>Pa(s,typeof t!="symbol"?t+"":t,r);import{j as e,R as bs,I as ys,F as ws,S as Ke,a as fs,P as Da,C as vs,b as Ns,V as qa,c as Fa,d as _s,e as Ta,T as ks,f as Aa,g as zs,h as Cs,i as Va,k as Ss,l as Ia,L as Ls,m as Rs,n as Wa,o as Ua,p as Es,q as Oa,r as Ba,s as $s,t as Ps,u as Ds,v as qs,w as Fs,x as Ma,y as Ts,z as Ka,A as Za,B as As,D as Ha,E as Qa,G as Ga,H as Ya,J as Vs,O as Is,K as Xa,M as Ws,N as Ja,Q as Us,U as Os,W as Bs,X as er}from"./radix-ui-C5McgZzy.js";import{k as sr,a as f,N as Ye,e as ne,l as b,d as Ms,R as de,n as ce,o as G,O as ue,B as ar}from"./react-vendor-Crp7TieP.js";import{T as rr}from"./utils-ByUfgEiL.js";import{M as tr,d as ir,n as Se,$ as me,I as Q,e as P,f as re,X as nr,i as lr,j as Ks,E as oe,Q as dr,l as cr,m as or,D as hr}from"./refine-core-BjumCBFr.js";import{c as xr,k as B,_ as _e,I as ur}from"./refine-ui-CTAQEfRS.js";import{t as mr,c as jr,a as Le,C as Ze,b as pr,d as Zs,X as Hs,M as Qs,L as gr,B as Gs,e as je,U as he,S as Ys,T as se,A as Ne,f as br,g as Ae,P as H,E as te,h as M,i as T,W as pe,j as yr,k as He,l as wr,F as Qe,m as ge,n as Ve,o as Ie,p as Xe,q as fr,R as Je,r as ve,s as es,u as vr,v as Nr,w as _r,x as kr}from"./ui-utils-BI7W93w0.js";import{R as zr,A as Cr,a as Sr,X as Lr,Y as Rr}from"./tables-CaG-tRN8.js";import"./forms-CRFkyq38.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))n(d);new MutationObserver(d=>{for(const i of d)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(d){const i={};return d.integrity&&(i.integrity=d.integrity),d.referrerPolicy&&(i.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?i.credentials="include":d.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(d){if(d.ep)return;d.ep=!0;const i=r(d);fetch(d.href,i)}})();var ze={},ss;function Er(){if(ss)return ze;ss=1;var s=sr();return ze.createRoot=s.createRoot,ze.hydrateRoot=s.hydrateRoot,ze}var $r=Er();const Pr="https://bkuvjleqoubzbauczrsf.supabase.co",Dr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJrdXZqbGVxb3ViemJhdWN6cnNmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3OTg2MzgsImV4cCI6MjA3MzM3NDYzOH0.3C0VTIppXgmVQvZU4oS_uwB7ebZ5bVuKOduKZ0mpmXg",ee=xr(Pr,Dr,{db:{schema:"public"},auth:{persistSession:!0}}),R=(...s)=>mr(jr(s)),qr={invalid_credentials:"Nieprawidłowy email lub hasło.","Invalid login credentials":"Nieprawidłowy email lub hasło.",email_not_confirmed:"Email nie został potwierdzony.","Email not confirmed":"Email nie został potwierdzony.",user_not_found:"Nie znaleziono użytkownika.","User not found":"Nie znaleziono użytkownika.",network_error:"Błąd połączenia z serwerem.","Too many requests":"Zbyt wiele prób. Spróbuj ponownie za chwilę."},Fr=s=>{if(!s)return{message:"Nieznany błąd",name:"UnknownError",statusCode:500};const t=s.message||s.error_description||"";for(const[r,n]of Object.entries(qr))if(t.includes(r))return{message:n,name:"LoginError",statusCode:s.code==="invalid_credentials"?401:400};return{message:t||"Błąd logowania",name:"LoginError",statusCode:400}},Xs={login:async(s,t)=>{try{if(!s||!t)return{success:!1,error:"Email i hasło są wymagane"};const{data:r,error:n}=await ee.auth.signInWithPassword({email:s.trim().toLowerCase(),password:t});return n?{success:!1,error:Fr(n).message}:r.session?{success:!0}:{success:!1,error:"Nie udało się utworzyć sesji"}}catch(r){return{success:!1,error:r.message||"Nieznany błąd"}}},loginForRefine:async(s,t)=>{const r=await Xs.login(s,t);return r.success?r:{success:!1,error:{message:r.error,name:"LoginError",statusCode:400}}},checkAuth:async()=>{const{data:{session:s}}=await ee.auth.getSession();return!!s}},Tr={user_already_exists:"Konto z tym adresem email już istnieje","User already registered":"Konto z tym adresem email już istnieje","already exists":"Konto z tym adresem email już istnieje",weak_password:"Hasło musi mieć co najmniej 6 znaków","Password should be at least":"Hasło musi mieć co najmniej 6 znaków","Password cannot be longer than 72":"Hasło nie może być dłuższe niż 72 znaki",invalid_email:"Nieprawidłowy format adresu email","Invalid email":"Nieprawidłowy format adresu email",over_email_send_rate_limit:"Za szybko! Poczekaj 2 sekundy przed ponowną próbą"},as=s=>{if(!s)return{message:"Nieznany błąd",name:"UnknownError",statusCode:500};const t=s.message||"";for(const[r,n]of Object.entries(Tr))if(t.includes(r)){let d=400;return r.includes("already")&&(d=409),r.includes("email_send_rate")&&(d=429),{message:n,name:"RegisterError",statusCode:d}}return{message:t||"Rejestracja nie powiodła się",name:"RegisterError",statusCode:400}},Js={register:async(s,t,r)=>{try{const{data:n,error:d}=await ee.auth.signUp({email:s.trim().toLowerCase(),password:t,options:{data:{full_name:r.trim(),role:"student"},emailRedirectTo:`${window.location.origin}/login?verified=true`}});return d?{success:!1,error:as(d).message}:n.user?{success:!0,needsEmailConfirmation:!n.session}:{success:!1,error:"Rejestracja nie powiodła się"}}catch(n){return{success:!1,error:n.message||"Błąd rejestracji"}}},registerForRefine:async(s,t,r)=>{const n=await Js.register(s,t,r);return n.success?{success:!0,successNotification:n.needsEmailConfirmation?{message:"Rejestracja udana!",description:"Sprawdź email aby potwierdzić konto."}:{message:"Rejestracja udana!",description:"Możesz się teraz zalogować."}}:{success:!1,error:as({message:n.error})}}},Ar={"User not found":"Nie znaleziono użytkownika z tym adresem email","Invalid email":"Nieprawidłowy format adresu email",over_email_send_rate_limit:"Za szybko! Poczekaj chwilę przed kolejną próbą",reset_password_rate_limit:"Zbyt wiele prób. Spróbuj ponownie za kilka minut"},rs=s=>{if(!s)return{message:"Nieznany błąd",name:"UnknownError",statusCode:500};const t=s.message||"";for(const[r,n]of Object.entries(Ar))if(t.includes(r))return{message:n,name:"ForgotPasswordError",statusCode:r.includes("rate_limit")?429:400};return{message:t||"Błąd podczas wysyłania emaila",name:"ForgotPasswordError",statusCode:400}},ea={sendResetEmail:async s=>{try{const{error:t}=await ee.auth.resetPasswordForEmail(s.trim().toLowerCase(),{redirectTo:`${window.location.origin}/update-password`});return t?{success:!1,error:rs(t).message}:{success:!0}}catch(t){return{success:!1,error:t.message||"Błąd podczas wysyłania emaila"}}},sendResetEmailForRefine:async s=>{const t=await ea.sendResetEmail(s);return t.success?{success:!0,successNotification:{message:"Email wysłany!",description:"Sprawdź swoją skrzynkę odbiorczą"}}:{success:!1,error:rs({message:t.error})}}},Vr={"New password should be different":"Nowe hasło musi być inne niż obecne","Password should be at least":"Hasło musi mieć co najmniej 6 znaków","Invalid token":"Link wygasł lub jest nieprawidłowy",session_not_found:"Sesja wygasła. Spróbuj ponownie"},ts=s=>{if(!s)return{message:"Nieznany błąd",name:"UnknownError",statusCode:500};const t=s.message||"";for(const[r,n]of Object.entries(Vr))if(t.includes(r))return{message:n,name:"UpdatePasswordError",statusCode:r.includes("token")||r.includes("session")?401:400};return{message:t||"Błąd aktualizacji hasła",name:"UpdatePasswordError",statusCode:400}},sa={checkSession:async()=>{try{const{data:s}=await ee.auth.getSession(),r=new URLSearchParams(window.location.hash.substring(1)).get("type");return!s.session&&r!=="recovery"?{isValid:!1,error:"Link wygasł lub jest nieprawidłowy"}:{isValid:!0}}catch{return{isValid:!1,error:"Błąd weryfikacji sesji"}}},updatePassword:async s=>{try{const{error:t}=await ee.auth.updateUser({password:s});return t?{success:!1,error:ts(t).message}:{success:!0}}catch(t){return{success:!1,error:t.message||"Błąd aktualizacji hasła"}}},updatePasswordForRefine:async s=>{const t=await sa.updatePassword(s);return t.success?{success:!0,redirectTo:"/login?passwordChanged=true"}:{success:!1,error:ts({message:t.error})}}};class Ir{constructor(){fe(this,"cache",null);fe(this,"lastFetch",0);fe(this,"CACHE_DURATION",300*1e3);fe(this,"fetchPromise",null)}async get(t=!1){const r=Date.now();if(!t&&this.cache&&r-this.lastFetch<this.CACHE_DURATION)return this.cache;if(this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetchUser();const n=await this.fetchPromise;return this.fetchPromise=null,n}async fetchUser(){try{const{data:{session:t}}=await ee.auth.getSession();if(!t?.user)return this.clear(),null;const{data:r,error:n}=await ee.from("users").select("*").eq("id",t.user.id).single();if(n||!r){console.error("Error fetching user data:",n);const i={id:t.user.id,email:t.user.email||"",full_name:t.user.user_metadata?.full_name||t.user.email?.split("@")[0]||"User",vendor_id:1,role:"student"};return this.set(i),i}const d={id:r.id,email:r.email,full_name:r.full_name,vendor_id:r.vendor_id,role:r.role,is_active:r.is_active,created_at:r.created_at};return this.set(d),d}catch(t){return console.error("Error in fetchUser:",t),this.clear(),null}}set(t){this.cache=t,this.lastFetch=Date.now()}clear(){this.cache=null,this.lastFetch=0,this.fetchPromise=null}async refresh(){return this.get(!0)}}const le=new Ir;ee.auth.onAuthStateChange((s,t)=>{s==="SIGNED_OUT"||!t?le.clear():(s==="SIGNED_IN"||s==="TOKEN_REFRESHED")&&le.get(!0)});const $e={logout:async()=>{try{le.clear();const{error:s}=await ee.auth.signOut();return s?{success:!1,error:{message:"Błąd podczas wylogowania",name:"LogoutError",statusCode:500}}:{success:!0,redirectTo:"/login"}}catch{return{success:!1,error:{message:"Nieoczekiwany błąd podczas wylogowania",name:"LogoutError",statusCode:500}}}},check:async()=>{try{const{data:{session:s}}=await ee.auth.getSession();if(!s)return{authenticated:!1,redirectTo:"/login"};const t=s.expires_at;return t&&t*1e3<Date.now()?{authenticated:!1,redirectTo:"/login"}:{authenticated:!0}}catch{return{authenticated:!1,redirectTo:"/login"}}},handleError:async s=>(console.error("Auth error:",s),s?.statusCode===401?(le.clear(),{redirectTo:"/login",logout:!0,error:s}):{error:s})},Wr={login:async({email:s,password:t})=>{const r=await Xs.login(s,t);return r.success&&await le.refresh(),r},logout:async()=>await $e.logout(),check:async()=>await $e.check(),getIdentity:async()=>await le.get(),getPermissions:async()=>(await le.get())?.role||null,register:async({email:s,password:t,name:r})=>await Js.registerForRefine(s,t,r),forgotPassword:async({email:s})=>await ea.sendResetEmailForRefine(s),updatePassword:async({password:s})=>{const t=await sa.updatePasswordForRefine(s);return t.success&&await le.clear(),t},onError:async s=>await $e.handleError(s)},F=({isLoading:s,isError:t,loadingText:r="Loading...",errorMsg:n="Error loading data"})=>s?e.jsx("div",{className:"p-6 text-gray-600 animate-reverse-pulse",children:r}):t?e.jsx("div",{className:"p-6 text-red-500",children:n}):null,Ur=Le("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-3.5 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Or=f.forwardRef(({className:s,variant:t,...r},n)=>e.jsx("div",{ref:n,role:"alert",className:R(Ur({variant:t}),s),...r}));Or.displayName="Alert";const Br=f.forwardRef(({className:s,...t},r)=>e.jsx("h5",{ref:r,className:R("mb-1 font-medium leading-none tracking-tight",s),...t}));Br.displayName="AlertTitle";const Mr=f.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:R("text-sm [&_p]:leading-relaxed",s),...t}));Mr.displayName="AlertDescription";const Kr=f.forwardRef(({className:s,...t},r)=>e.jsx(bs,{ref:r,className:R("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));Kr.displayName=bs.displayName;const Zr=f.forwardRef(({className:s,...t},r)=>e.jsx(ys,{ref:r,className:R("aspect-square h-full w-full object-cover",s),...t}));Zr.displayName=ys.displayName;const Hr=f.forwardRef(({className:s,...t},r)=>e.jsx(ws,{ref:r,className:R("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));Hr.displayName=ws.displayName;const Qr=Le("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function y({className:s,variant:t,asChild:r=!1,...n}){const d=r?Ke:"span";return e.jsx(d,{"data-slot":"badge",className:R(Qr({variant:t}),s),...n})}const Gr=f.forwardRef(({...s},t)=>e.jsx("nav",{ref:t,"aria-label":"breadcrumb",...s}));Gr.displayName="Breadcrumb";const Yr=f.forwardRef(({className:s,...t},r)=>e.jsx("ol",{ref:r,className:R("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",s),...t}));Yr.displayName="BreadcrumbList";const Xr=f.forwardRef(({className:s,...t},r)=>e.jsx("li",{ref:r,className:R("inline-flex items-center gap-1.5",s),...t}));Xr.displayName="BreadcrumbItem";const Jr=f.forwardRef(({asChild:s,className:t,...r},n)=>{const d=s?Ke:"a";return e.jsx(d,{ref:n,className:R("transition-colors hover:text-foreground",t),...r})});Jr.displayName="BreadcrumbLink";const et=f.forwardRef(({className:s,...t},r)=>e.jsx("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:R("font-normal text-foreground",s),...t}));et.displayName="BreadcrumbPage";const st=Le("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),x=f.forwardRef(({className:s,variant:t,size:r,asChild:n=!1,...d},i)=>{const l=n?Ke:"button";return e.jsx(l,{className:R(st({variant:t,size:r,className:s})),ref:i,...d})});x.displayName="Button";const z=f.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:R("rounded-xl border bg-card text-card-foreground shadow flex flex-col overflow-hidden",s),...t}));z.displayName="Card";const C=f.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:R("flex flex-col space-y-1.5 p-6 pb-3 bg-pink-200/25",s),...t}));C.displayName="CardHeader";const E=f.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:R("text-lg font-semibold leading-tight tracking-tight pt-3",s),...t}));E.displayName="CardTitle";const aa=f.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:R("text-sm text-muted-foreground",s),...t}));aa.displayName="CardDescription";const S=f.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:R("p-3 lg:p-6 pt-3 space-y-3 flex-1 bg-background",s),...t}));S.displayName="CardContent";const X=f.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:R("flex items-center justify-between p-6 pt-0",s),...t}));X.displayName="CardFooter";const at=Le("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),We=f.forwardRef(({className:s,...t},r)=>e.jsx(fs,{ref:r,className:R(at(),s),...t}));We.displayName=fs.displayName;f.createContext({});f.createContext({});const N=f.forwardRef(({className:s,type:t,...r},n)=>e.jsx("input",{type:t,className:R("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...r}));N.displayName="Input";const rt=f.forwardRef(({className:s,align:t="center",sideOffset:r=4,...n},d)=>e.jsx(Da,{children:e.jsx(vs,{ref:d,align:t,sideOffset:r,className:R("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...n})}));rt.displayName=vs.displayName;const ra=f.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(Ns,{ref:n,className:R("relative overflow-hidden",s),...r,children:[e.jsx(qa,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(ta,{}),e.jsx(Fa,{})]}));ra.displayName=Ns.displayName;const ta=f.forwardRef(({className:s,orientation:t="vertical",...r},n)=>e.jsx(_s,{ref:n,orientation:t,className:R("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:e.jsx(Ta,{className:"relative flex-1 rounded-full bg-border"})}));ta.displayName=_s.displayName;const I=Oa,W=Ba,A=f.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(ks,{ref:n,className:R("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[t,e.jsx(Aa,{asChild:!0,children:e.jsx(Ze,{className:"h-4 w-4 opacity-50"})})]}));A.displayName=ks.displayName;const ia=f.forwardRef(({className:s,...t},r)=>e.jsx(zs,{ref:r,className:R("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(pr,{className:"h-4 w-4"})}));ia.displayName=zs.displayName;const na=f.forwardRef(({className:s,...t},r)=>e.jsx(Cs,{ref:r,className:R("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Ze,{className:"h-4 w-4"})}));na.displayName=Cs.displayName;const V=f.forwardRef(({className:s,children:t,position:r="popper",...n},d)=>e.jsx(Va,{children:e.jsxs(Ss,{ref:d,className:R("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...n,children:[e.jsx(ia,{}),e.jsx(Ia,{className:R("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(na,{})]})}));V.displayName=Ss.displayName;const tt=f.forwardRef(({className:s,...t},r)=>e.jsx(Ls,{ref:r,className:R("px-2 py-1.5 text-sm font-semibold",s),...t}));tt.displayName=Ls.displayName;const D=f.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(Rs,{ref:n,className:R("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Wa,{children:e.jsx(Zs,{className:"h-4 w-4"})})}),e.jsx(Ua,{children:t})]}));D.displayName=Rs.displayName;const it=f.forwardRef(({className:s,...t},r)=>e.jsx(Es,{ref:r,className:R("-mx-1 my-1 h-px bg-muted",s),...t}));it.displayName=Es.displayName;const O=f.forwardRef(({className:s,orientation:t="horizontal",decorative:r=!0,...n},d)=>e.jsx($s,{ref:d,decorative:r,orientation:t,className:R("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...n}));O.displayName=$s.displayName;const J=f.forwardRef(({className:s,...t},r)=>e.jsx("textarea",{className:R("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...t}));J.displayName="Textarea";const nt=f.forwardRef(({className:s,...t},r)=>e.jsx(Ps,{ref:r,className:R("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...t}));nt.displayName=Ps.displayName;const lt=f.forwardRef(({className:s,...t},r)=>e.jsx(Ds,{ref:r,className:R("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...t}));lt.displayName=Ds.displayName;const dt=f.forwardRef(({className:s,...t},r)=>e.jsx(qs,{ref:r,className:R("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));dt.displayName=qs.displayName;const ct=f.forwardRef(({className:s,...t},r)=>e.jsx(Fs,{ref:r,className:R("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(Ma,{className:R("flex items-center justify-center text-current"),children:e.jsx(Zs,{className:"h-4 w-4"})})}));ct.displayName=Fs.displayName;var Re="Switch",[ot,hl]=Za(Re),[ht,xt]=ot(Re),la=f.forwardRef((s,t)=>{const{__scopeSwitch:r,name:n,checked:d,defaultChecked:i,required:l,disabled:m,value:c="on",onCheckedChange:o,form:u,...h}=s,[p,a]=f.useState(null),g=Ts(t,ke=>a(ke)),w=f.useRef(!1),U=p?u||!!p.closest("form"):!0,[L,Ee]=Ka({prop:d,defaultProp:i??!1,onChange:o,caller:Re});return e.jsxs(ht,{scope:r,checked:L,disabled:m,children:[e.jsx(As.button,{type:"button",role:"switch","aria-checked":L,"aria-required":l,"data-state":ha(L),"data-disabled":m?"":void 0,disabled:m,value:c,...h,ref:g,onClick:Ha(s.onClick,ke=>{Ee(Ea=>!Ea),U&&(w.current=ke.isPropagationStopped(),w.current||ke.stopPropagation())})}),U&&e.jsx(oa,{control:p,bubbles:!w.current,name:n,value:c,checked:L,required:l,disabled:m,form:u,style:{transform:"translateX(-100%)"}})]})});la.displayName=Re;var da="SwitchThumb",ca=f.forwardRef((s,t)=>{const{__scopeSwitch:r,...n}=s,d=xt(da,r);return e.jsx(As.span,{"data-state":ha(d.checked),"data-disabled":d.disabled?"":void 0,...n,ref:t})});ca.displayName=da;var ut="SwitchBubbleInput",oa=f.forwardRef(({__scopeSwitch:s,control:t,checked:r,bubbles:n=!0,...d},i)=>{const l=f.useRef(null),m=Ts(l,i),c=Qa(r),o=Ga(t);return f.useEffect(()=>{const u=l.current;if(!u)return;const h=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&a){const g=new Event("click",{bubbles:n});a.call(u,r),u.dispatchEvent(g)}},[c,r,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...d,tabIndex:-1,ref:m,style:{...d.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});oa.displayName=ut;function ha(s){return s?"checked":"unchecked"}var xa=la,mt=ca;const jt=f.forwardRef(({className:s,...t},r)=>e.jsx(xa,{className:R("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:r,children:e.jsx(mt,{className:R("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));jt.displayName=xa.displayName;const pt=f.forwardRef(({className:s,sideOffset:t=4,...r},n)=>e.jsx(Ya,{children:e.jsx(Vs,{ref:n,sideOffset:t,className:R("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...r})}));pt.displayName=Vs.displayName;const gt=Xa,ua=f.forwardRef(({className:s,...t},r)=>e.jsx(Is,{ref:r,className:R("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));ua.displayName=Is.displayName;const bt=f.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(gt,{children:[e.jsx(ua,{}),e.jsxs(Ws,{ref:n,className:R("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[t,e.jsxs(Ja,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Hs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));bt.displayName=Ws.displayName;const yt=f.forwardRef(({className:s,...t},r)=>e.jsx(Us,{ref:r,className:R("text-lg font-semibold leading-none tracking-tight",s),...t}));yt.displayName=Us.displayName;const wt=f.forwardRef(({className:s,...t},r)=>e.jsx(Os,{ref:r,className:R("text-sm text-muted-foreground",s),...t}));wt.displayName=Os.displayName;const ft=f.forwardRef(({className:s,value:t,...r},n)=>e.jsx(Bs,{ref:n,className:R("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",s),...r,children:e.jsx(er,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));ft.displayName=Bs.displayName;const vt=({onClose:s,brand:t="ScrapYard Manager"})=>{const{mutate:r}=tr(),{menuItems:n}=ir(),{data:d}=Se();return e.jsxs("div",{className:"flex h-full w-64 flex-col border-r bg-background",children:[e.jsxs("div",{className:"flex h-16 items-center justify-between border-b px-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qs,{className:"h-6 w-6 mr-2"}),e.jsx("span",{className:"font-semibold",children:t})]}),s&&e.jsx(x,{variant:"ghost",size:"sm",onClick:s,className:"lg:hidden",children:e.jsx(Hs,{className:"h-4 w-4"})})]}),e.jsx(ra,{className:"flex-1 px-3 py-4",children:e.jsx("nav",{className:"space-y-4",children:n.map(i=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ye,{to:i.route??"/",className:({isActive:l})=>R("flex items-center justify-between rounded-md px-3 py-2 text-sm font-semibold transition-colors hover:bg-accent hover:text-accent-foreground",l?"bg-accent text-accent-foreground":"text-foreground"),onClick:s,children:[e.jsxs("span",{className:"flex items-center",children:[i.icon&&e.jsx("span",{className:"mr-3",children:i.icon}),i.label]}),i.children&&i.children.length>0&&e.jsx(Ze,{className:"h-4 w-4 opacity-60"})]}),i.children&&i.children.length>0&&e.jsx("div",{className:"ml-3 border-l pl-3 space-y-1",children:i.children.map(l=>e.jsxs(Ye,{to:l.route??"/",className:({isActive:m})=>R("flex items-center rounded-md px-3 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground",m?"bg-accent text-accent-foreground":"text-muted-foreground"),onClick:s,children:[l.icon&&e.jsx("span",{className:"mr-3",children:l.icon}),l.label]},l.key))})]},i.key))})}),e.jsx(O,{}),e.jsxs("div",{className:"p-4 text-xs text-muted-foreground",children:["Zalogowano jako: ",e.jsx("span",{className:"font-medium",children:d?.email})]}),e.jsx("div",{className:"p-4",children:e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>{r(),s?.()},className:"w-full justify-start",children:[e.jsx(gr,{className:"mr-2 h-4 w-4"})," Wyloguj"]})})]})},be=({children:s,brand:t="ScrapYard Manager"})=>{const[r,n]=f.useState(!1);return e.jsx("div",{className:"min-h-screen bg-stone-200 relative overflow-x-hidden",children:e.jsxs("div",{className:"flex relative",children:[r&&e.jsx("div",{className:"fixed inset-0 z-40 bg-purple-900/20 backdrop-blur-sm lg:hidden",onClick:()=>n(!1)}),e.jsx("aside",{className:`h-screen w-64 transform transition-transform duration-300 ease-in-out fixed left-0 top-0 z-50 ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 bg-background/95 backdrop-blur-md border-r border-purple-200/20`,children:e.jsx(vt,{onClose:()=>n(!1),brand:t})}),e.jsxs("main",{className:"flex-1 lg:ml-64 min-w-0 relative z-10",children:[e.jsxs("div",{className:"sticky top-0 z-30 flex h-16 items-center border-b border-purple-200/20 bg-background/80 backdrop-blur-md px-4 lg:hidden",children:[e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>n(d=>!d),className:"mr-2 hover:bg-purple-100/20 hover:text-purple-700",children:e.jsx(Qs,{className:"h-6 w-6"})}),e.jsx("span",{className:"font-semibold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:t})]}),s]})]})})},Ue=s=>{const t=(s??"").toLowerCase();if(t==="administrator"||t==="admin")return"administrator";if(t==="biuro")return"biuro";if(t==="logistyk")return"logistyk";if(t==="handlowiec")return"handlowiec";if(t==="operator")return"operator";if(t==="kierowca"||t==="kierowca_krotko"||t==="kierowca_dlugo")return"kierowca"},ye=({expected:s,branchId:t,fallback:r=null,children:n})=>{const d=(Array.isArray(s)?s:[s]).map(Ue).filter(Boolean),{data:i,isLoading:l,isError:m}=me({resource:"v_user_effective_roles",pagination:{pageSize:200,current:1}});return l?e.jsx("div",{className:"p-6",children:"Ładowanie…"}):m?e.jsx("div",{className:"p-6 text-red-600",children:"Błąd ładowania ról."}):(i?.data??[]).some(u=>{const h=Ue(u.role);if(!h)return!1;const p=d.includes(h),a=t?u.branch_id===t||u.branch_id===null:!0;return p&&a})?e.jsx(e.Fragment,{children:n}):e.jsx(e.Fragment,{children:r})},Nt=s=>{const r=(Array.isArray(s)?s:[s]).map(Ue).filter(Boolean),n=["administrator","biuro","logistyk","handlowiec","operator","kierowca"],d={administrator:"/admin/dashboard/overview",biuro:"/biuro/dashboard/overview",logistyk:"/logistyk/dashboard/overview",handlowiec:"/handlowiec/dashboard/overview",operator:"/operator/dashboard/overview",kierowca:"/kierowca/dashboard/overview"},i=n.find(l=>r.includes(l));return i?d[i]:"/admin/dashboard/overview"},we=({text:s,colorClass:t})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-block h-12 w-12 animate-spin rounded-full border-4 border-current border-r-transparent ${t}`}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:s})]})}),$=({children:s})=>e.jsx("div",{className:"p-2 md:p-12 space-y-6 max-w-7xl mx-auto",children:s}),_t={card:{wrap:"space-y-0",title:"font-medium",description:"text-muted-foreground"},lg:{wrap:"space-y-0",title:"text-3xl font-bold tracking-tight",description:"text-muted-foreground"},md:{wrap:"space-y-0",title:"font-medium",description:"text-muted-foreground"},sm:{wrap:"space-y-1",title:"font-medium text-sm text-muted-foreground mb-1",description:"text-sm"}},k=({title:s,description:t,variant:r="lg"})=>{const n=_t[r],d=()=>{switch(r){case"lg":return e.jsx("h1",{className:n.title,children:s});case"md":return e.jsx("h2",{className:n.title,children:s});case"sm":return e.jsx("h3",{className:n.title,children:s});default:return e.jsx("h1",{className:n.title,children:s})}};return r==="card"?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"text-lg font-semibold leading-tight flex items-center gap-2",children:s}),e.jsx(aa,{className:"text-sm text-muted-foreground mt-2",children:t})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:n.wrap,children:[d(),e.jsx("p",{className:`prose ${n.description}`,children:t})]})})},kt={"between-center":"flex justify-between items-center gap-2",center:"flex justify-center items-center gap-2",start:"flex justify-start items-center gap-2",end:"flex justify-end items-center gap-2"},v=({children:s,variant:t="between-center",className:r=""})=>{const n=kt[t],d=r?`${n} ${r}`:n;return e.jsx("div",{className:d,children:s})},zt={"1-2-3":"grid gap-6 md:grid-cols-2 lg:grid-cols-3","1-2-2":"grid gap-6 md:grid-cols-2","1-1-1":"grid gap-6","2-2-4":"grid gap-6 grid-cols-2 lg:grid-cols-4"},_=({children:s,variant:t="1-2-3",className:r=""})=>{const n=zt[t],d=r?`${n} ${r}`:n;return e.jsx("div",{className:d,children:s})},Pe=(s,t=[])=>{const{tableQuery:r}=Q({resource:s,filters:t.length?{initial:t}:void 0,pagination:{current:1,pageSize:1}}),n=r.isLoading,d=typeof r.data?.total=="number"?r.data.total:void 0;return{loading:n,total:d}},De=({label:s,value:t,loading:r})=>e.jsxs(z,{children:[e.jsx(C,{className:"pb-2",children:e.jsx(E,{className:"text-sm text-muted-foreground",children:s})}),e.jsx(S,{children:e.jsx("div",{className:"text-3xl font-bold",children:r?"…":t??"—"})})]}),Ct=({role:s,label:t,Icon:r})=>{const n=ne();return e.jsxs(z,{className:"hover:shadow-md transition",children:[e.jsx(C,{className:"pb-2",children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5 opacity-70"}),t]})}),e.jsxs(S,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Szybkie wejście do modułu"}),e.jsxs(x,{variant:"outline",size:"sm",className:"mt-3",onClick:()=>n(Nt(s)),children:["Wejdź",e.jsx(Ne,{className:"ml-2 h-4 w-4"})]})]})]})},St=()=>{const s=Pe("users"),t=Pe("branches"),r=Pe("tasks",[{field:"is_overdue_listed",operator:"eq",value:!0}]),n=[{role:"biuro",label:"Biuro",Icon:Gs},{role:"logistyk",label:"Logistyk",Icon:je},{role:"handlowiec",label:"Handlowiec",Icon:he},{role:"operator",label:"Operator",Icon:Ys},{role:"kierowca",label:"Kierowca",Icon:se}];return e.jsxs($,{children:[e.jsx(v,{children:e.jsx(k,{title:"Dashboard – Administrator",description:"Podsumowanie i skróty"})}),e.jsxs(_,{children:[e.jsx(De,{label:"Użytkownicy",value:s.total,loading:s.loading}),e.jsx(De,{label:"Oddziały",value:t.total,loading:t.loading}),e.jsx(De,{label:"Zadania overdue",value:r.total,loading:r.loading})]}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Skróty do modułów ról"}),e.jsx(_,{children:n.map(({role:d,label:i,Icon:l})=>e.jsx(Ct,{role:d,label:i,Icon:l},d))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dostęp zostanie ostatecznie zweryfikowany przez RoleGuard w danym module."})]})]})},ie=({current:s,pageSize:t,total:r,setCurrent:n,setPageSize:d,itemName:i="elementów",pageSizeOptions:l=[10,20,50]})=>{const m=Math.ceil(r/t),c=(s-1)*t+1,o=Math.min(s*t,r),u=s>1,h=s<m,p=()=>{const a=[];if(m<=5)for(let w=1;w<=m;w++)a.push(w);else{a.push(1),s>3&&a.push("...");const w=Math.max(2,s-1),U=Math.min(m-1,s+1);for(let L=w;L<=U;L++)a.push(L);s<m-2&&a.push("..."),a.push(m)}return a};return r===0?null:e.jsxs(v,{className:"mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Pokazuje ",c,"-",o," z ",r," ",i]}),e.jsxs(v,{className:"gap-2",children:[d&&e.jsxs(I,{value:t.toString(),onValueChange:a=>{d(parseInt(a)),n(1)},children:[e.jsx(A,{className:"w-[100px]",children:e.jsx(W,{})}),e.jsx(V,{children:l.map(a=>e.jsxs(D,{value:a.toString(),children:[a," / str."]},a))})]}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>n(s-1),disabled:!u,children:e.jsx(br,{className:"w-4 h-4"})}),e.jsx("div",{className:"hidden sm:flex gap-1",children:p().map((a,g)=>a==="..."?e.jsx("span",{className:"px-3 py-1 text-sm text-muted-foreground",children:"..."},`ellipsis-${g}`):e.jsx(x,{variant:s===a?"default":"outline",size:"sm",onClick:()=>n(a),className:"min-w-[40px]",children:a},a))}),e.jsxs("div",{className:"flex sm:hidden items-center px-3 text-sm",children:[s," / ",m]}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>n(s+1),disabled:!h,children:e.jsx(Ae,{className:"w-4 h-4"})})]})]})},ma=()=>{const{tableQuery:{data:s,isLoading:t,isError:r},current:n,setCurrent:d,pageSize:i,setFilters:l}=Q({resource:"tasks",sorters:{initial:[{field:"start_at",order:"desc"}]}}),{create:m,edit:c,show:o}=P(),u=F({isLoading:t,isError:r});return u||e.jsxs($,{children:[e.jsxs(v,{children:[e.jsx(k,{title:"Zadania",description:"Lista zadań (kalendarz/plan)"}),e.jsxs(x,{onClick:()=>m("tasks"),children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Dodaj zadanie"]})]}),e.jsx(v,{children:e.jsx(N,{placeholder:"Szukaj po tytule...",className:"max-w-sm",onChange:h=>l([{field:"title",operator:"contains",value:h.target.value}])})}),e.jsx(_,{children:s?.data?.map(h=>e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(k,{title:h.title,description:`Oddział #${h.branch_id} • ${new Date(h.start_at).toLocaleString()}`,variant:"card"})}),e.jsx(S,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsx(y,{variant:"secondary",children:h.type}),e.jsx(y,{variant:"outline",children:h.status}),h.assigned_vehicle_id&&e.jsxs(y,{variant:"outline",className:"text-xs",children:["pojazd #",h.assigned_vehicle_id]}),h.assigned_container_id&&e.jsxs(y,{variant:"outline",className:"text-xs",children:["kontener #",h.assigned_container_id]})]})}),e.jsx(X,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>o("tasks",h.id),children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c("tasks",h.id),children:e.jsx(M,{className:"w-4 h-4"})})]})})]},h.id))}),e.jsx(ie,{current:n,pageSize:i,total:s?.total||0,setCurrent:d,itemName:"zadania"})]})},K=({children:s,onSubmit:t,className:r="",...n})=>{const d="space-y-6",i=r?`${d} ${r}`:d;return e.jsx("form",{onSubmit:t,className:i,...n,children:s})},j=({children:s,label:t,htmlFor:r,error:n,required:d=!1,className:i="",hint:l})=>{const m="space-y-2",c=i?`${m} ${i}`:m,o=()=>t?typeof t=="string"?e.jsxs(We,{htmlFor:r,children:[t,d&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}):e.jsxs(We,{htmlFor:r,className:"flex items-center",children:[t,d&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}):null,u=f.isValidElement(s)?f.cloneElement(s,{className:`${s.props.className||""} ${n?"border-red-500 ring-1 ring-red-500":""}`.trim()}):s;return e.jsxs("div",{className:c,children:[o(),u,l&&!n&&e.jsx("p",{className:"text-sm text-muted-foreground",children:l}),n&&e.jsx("p",{className:"text-sm text-red-500",children:n})]})},Z=({children:s,className:t=""})=>{const r="flex justify-end items-center gap-4 pt-6 border-t",n=t?`${r} ${t}`:r;return e.jsx("div",{className:n,children:s})},q=({resource:s,value:t,onChange:r,valueField:n="id",labelField:d,renderLabel:i,placeholder:l="Wybierz…",pageSize:m=100,filters:c})=>{const o=[{field:String(d??n),order:"asc"}],{data:u,isLoading:h,isError:p}=me({resource:s,filters:c,sorters:o,pagination:{current:1,pageSize:m}}),a=u?.data??[],g=f.useMemo(()=>a.map(U=>{const L=String(U[n]),Ee=i?i(U):d?String(U[d]??L):L;return{id:L,label:Ee}}),[a,n,d,i]),w=h||p||g.length===0;return e.jsxs(I,{value:t!=null?String(t):void 0,onValueChange:r,disabled:w,children:[e.jsx(A,{children:e.jsx(W,{placeholder:h?"Ładowanie…":p?"Błąd ładowania":l})}),e.jsx(V,{children:g.map(U=>e.jsx(D,{value:U.id,children:U.label},U.id))})]})},Lt=["transport","plac"],Rt=["nowe","w_realizacji","zakonczone","anulowane"],ja=()=>{const{list:s}=P(),{data:t}=Se(),{refineCore:{onFinish:r},register:n,handleSubmit:d,setValue:i,watch:l,formState:{errors:m,isSubmitting:c}}=B({refineCoreProps:{resource:"tasks"}}),o=w=>r({...w,created_by:t?.id}),u=l("branch_id"),h=w=>i("branch_id",Number(w),{shouldValidate:!0}),p=w=>i("assigned_vehicle_id",Number(w)),a=w=>i("assigned_container_id",Number(w)),g=w=>i("assigned_driver",w);return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("tasks"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsx(v,{children:e.jsx(k,{title:"Nowe zadanie",description:"Utwórz nowe zadanie"})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(o),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Tytuł",htmlFor:"title",error:m.title?.message,required:!0,children:e.jsx(N,{id:"title",...n("title",{required:"Wymagane"})})}),e.jsx(j,{label:"Typ",error:m.type?.message,required:!0,children:e.jsxs(I,{onValueChange:w=>i("type",w),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz typ"})}),e.jsx(V,{children:Lt.map(w=>e.jsx(D,{value:w,children:w},w))})]})})]}),e.jsx(j,{label:"Opis",children:e.jsx(J,{rows:3,...n("description")})}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Oddział (branch_id)",required:!0,error:m.branch_id?.message,children:e.jsx(q,{resource:"branches",value:u,onChange:h,renderLabel:w=>`${w.name}${w.city?" — "+w.city:""} (#${w.id})`,placeholder:"Wybierz oddział"})}),e.jsx(j,{label:"Status",required:!0,children:e.jsxs(I,{defaultValue:"nowe",onValueChange:w=>i("status",w),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz status"})}),e.jsx(V,{children:Rt.map(w=>e.jsx(D,{value:w,children:w},w))})]})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Start (start_at)",htmlFor:"start_at",required:!0,children:e.jsx(N,{id:"start_at",type:"datetime-local",...n("start_at",{required:"Wymagane"})})}),e.jsx(j,{label:"Koniec (end_at)",htmlFor:"end_at",children:e.jsx(N,{id:"end_at",type:"datetime-local",...n("end_at")})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Kierowca (UUID)",children:e.jsx(q,{resource:"users",value:l("assigned_driver"),onChange:g,renderLabel:w=>`${w.full_name||w.email} (#${String(w.id).slice(0,8)})`,placeholder:"Wybierz kierowcę (opcjonalnie)"})}),e.jsx(j,{label:"Pojazd (assigned_vehicle_id)",children:e.jsx(q,{resource:"vehicles",value:l("assigned_vehicle_id"),onChange:p,renderLabel:w=>`${w.name}${w.reg_plate?" / "+w.reg_plate:""} (#${w.id})`,placeholder:"Wybierz pojazd (opcjonalnie)"})}),e.jsx(j,{label:"Kontener (assigned_container_id)",children:e.jsx(q,{resource:"containers",value:l("assigned_container_id"),onChange:a,renderLabel:w=>`${w.code} [${w.status}]${w.category?" / "+w.category:""} (#${w.id})`,placeholder:"Wybierz kontener (opcjonalnie)"})})]}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("tasks"),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:c||!t?.id,children:c?"Tworzenie...":"Utwórz"})]})]})})]})]})},Et=["transport","plac"],$t=["nowe","w_realizacji","zakonczone","anulowane"],pa=()=>{const{show:s}=P(),{refineCore:{onFinish:t,queryResult:r},register:n,handleSubmit:d,setValue:i,watch:l,formState:{errors:m,isSubmitting:c}}=B({refineCoreProps:{resource:"tasks",action:"edit"}}),o=r?.isLoading??!0,u=r?.isError??!1,h=r?.data?.data,p=F({isLoading:o,isError:u});if(p)return p;if(!h)return null;const a=L=>i("branch_id",Number(L),{shouldValidate:!0}),g=L=>i("assigned_vehicle_id",Number(L)),w=L=>i("assigned_container_id",Number(L)),U=L=>i("assigned_driver",L);return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("tasks",h.id),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do szczegółów"]}),e.jsx(v,{children:e.jsx(k,{title:"Edycja zadania",description:`ID: #${String(h.id).slice(0,8)}`})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Tytuł",htmlFor:"title",error:m.title?.message,required:!0,children:e.jsx(N,{id:"title",...n("title",{required:"Wymagane"})})}),e.jsx(j,{label:"Typ",required:!0,children:e.jsxs(I,{defaultValue:h.type,onValueChange:L=>i("type",L),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz typ"})}),e.jsx(V,{children:Et.map(L=>e.jsx(D,{value:L,children:L},L))})]})})]}),e.jsx(j,{label:"Opis",children:e.jsx(J,{rows:3,...n("description")})}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Oddział (branch_id)",required:!0,error:m.branch_id?.message,children:e.jsx(q,{resource:"branches",value:l("branch_id")??h.branch_id,onChange:a,renderLabel:L=>`${L.name}${L.city?" — "+L.city:""} (#${L.id})`,placeholder:"Wybierz oddział"})}),e.jsx(j,{label:"Status",required:!0,children:e.jsxs(I,{defaultValue:h.status,onValueChange:L=>i("status",L),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz status"})}),e.jsx(V,{children:$t.map(L=>e.jsx(D,{value:L,children:L},L))})]})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Start (start_at)",htmlFor:"start_at",required:!0,children:e.jsx(N,{id:"start_at",type:"datetime-local",...n("start_at",{required:"Wymagane"})})}),e.jsx(j,{label:"Koniec (end_at)",htmlFor:"end_at",children:e.jsx(N,{id:"end_at",type:"datetime-local",...n("end_at")})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Kierowca (UUID)",children:e.jsx(q,{resource:"users",value:l("assigned_driver")??h.assigned_driver,onChange:U,renderLabel:L=>`${L.full_name||L.email} (#${String(L.id).slice(0,8)})`,placeholder:"Wybierz kierowcę (opcjonalnie)"})}),e.jsx(j,{label:"Pojazd (assigned_vehicle_id)",children:e.jsx(q,{resource:"vehicles",value:l("assigned_vehicle_id")??h.assigned_vehicle_id,onChange:g,renderLabel:L=>`${L.name}${L.reg_plate?" / "+L.reg_plate:""} (#${L.id})`,placeholder:"Wybierz pojazd (opcjonalnie)"})}),e.jsx(j,{label:"Kontener (assigned_container_id)",children:e.jsx(q,{resource:"containers",value:l("assigned_container_id")??h.assigned_container_id,onChange:w,renderLabel:L=>`${L.code} [${L.status}]${L.category?" / "+L.category:""} (#${L.id})`,placeholder:"Wybierz kontener (opcjonalnie)"})})]}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("tasks",h.id),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:c,children:c?"Zapisywanie...":"Zapisz"})]})]})})]})]})},ga=()=>{const{queryResult:s}=re({resource:"tasks"}),{list:t,edit:r}=P(),n=s?.isLoading??!0,d=s?.isError??!1,i=s?.data?.data,l=F({isLoading:n,isError:d});return l||(i?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>t("tasks"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsxs(v,{children:[e.jsx(k,{title:i.title,description:`ID: #${String(i.id).slice(0,8)}`}),e.jsxs(x,{variant:"outline",onClick:()=>r("tasks",i.id),children:[e.jsx(M,{className:"w-4 h-4 mr-2"})," Edytuj"]})]}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Szczegóły"})}),e.jsxs(S,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{variant:"secondary",children:i.type}),e.jsx(y,{variant:"outline",children:i.status})]}),e.jsx(O,{}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Oddział:"})," ",i.branch_id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Start:"})," ",new Date(i.start_at).toLocaleString()]}),i.end_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Koniec:"})," ",new Date(i.end_at).toLocaleString()]}),i.assigned_driver&&e.jsxs("div",{children:[e.jsx("b",{children:"Kierowca (UUID):"})," ",i.assigned_driver]}),i.assigned_vehicle_id&&e.jsxs("div",{children:[e.jsx("b",{children:"Pojazd:"})," #",i.assigned_vehicle_id]}),i.assigned_container_id&&e.jsxs("div",{children:[e.jsx("b",{children:"Kontener:"})," #",i.assigned_container_id]})]})]})]})]}):null)},Oe={name:"tasks",list:"/admin/tasks",create:"/admin/tasks/create",edit:"/admin/tasks/edit/:id",show:"/admin/tasks/show/:id",meta:{label:"Zadania"}},ba=[e.jsx(b,{index:!0,element:e.jsx(ma,{})},"tasks-index"),e.jsx(b,{path:"create",element:e.jsx(ja,{})},"tasks-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(pa,{})},"tasks-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(ga,{})},"tasks-show")],ya=()=>{const{tableQuery:{data:s,isLoading:t,isError:r},current:n,setCurrent:d,pageSize:i,setFilters:l}=Q({resource:"vehicles",sorters:{initial:[{field:"created_at",order:"desc"}]}}),{create:m,edit:c,show:o}=P(),u=ne(),h=F({isLoading:t,isError:r});return h||e.jsxs($,{children:[e.jsxs(v,{children:[e.jsx(k,{title:"Flota",description:"Pojazdy w systemie"}),e.jsxs(x,{onClick:()=>m("vehicles"),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj pojazd"]})]}),e.jsx(v,{children:e.jsx(N,{placeholder:"Szukaj po nazwie...",className:"max-w-sm",onChange:p=>l([{field:"name",operator:"contains",value:p.target.value}])})}),e.jsx(_,{children:s?.data?.map(p=>e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(k,{title:p.name,description:`Oddział #${p.branch_id}`,variant:"card"})}),e.jsx(S,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsx(y,{variant:"secondary",children:p.type}),p.reg_plate&&e.jsx(y,{variant:"outline",children:p.reg_plate}),p.is_archived&&e.jsx(y,{variant:"destructive",children:"archiwum"})]})}),e.jsx(X,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>o("vehicles",p.id),children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c("vehicles",p.id),children:e.jsx(M,{className:"w-4 h-4"})}),p.asset_id&&e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>u(`/admin/maintenances/create?asset_id=${p.asset_id}&kind=usterka`),children:[e.jsx(pe,{className:"w-4 h-4 mr-1"})," Zgłoś usterkę"]})]})})]},p.id))}),e.jsx(ie,{current:n,pageSize:i,total:s?.total||0,setCurrent:d,itemName:"pojazdy"})]})},Pt=["ciezarowe","osobowe","przyczepa","naczepa"],wa=()=>{const{list:s}=P(),{refineCore:{onFinish:t},register:r,handleSubmit:n,setValue:d,watch:i,formState:{errors:l,isSubmitting:m}}=B({refineCoreProps:{resource:"vehicles"}});return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("vehicles"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsx(v,{children:e.jsx(k,{title:"Nowy pojazd",description:"Dodaj pojazd"})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:n(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Nazwa",htmlFor:"name",error:l.name?.message,required:!0,children:e.jsx(N,{id:"name",...r("name",{required:"Wymagane"})})}),e.jsx(j,{label:"Typ",required:!0,children:e.jsxs(I,{onValueChange:c=>d("type",c),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz typ"})}),e.jsx(V,{children:Pt.map(c=>e.jsx(D,{value:c,children:c},c))})]})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Oddział (branch_id)",required:!0,error:l.branch_id?.message,children:e.jsx(q,{resource:"branches",value:i("branch_id"),onChange:c=>d("branch_id",Number(c),{shouldValidate:!0}),renderLabel:c=>`${c.name}${c.city?" — "+c.city:""} (#${c.id})`,placeholder:"Wybierz oddział"})}),e.jsx(j,{label:"Rejestracja",htmlFor:"reg_plate",children:e.jsx(N,{id:"reg_plate",...r("reg_plate")})})]}),e.jsx(j,{label:"VIN",htmlFor:"vin",children:e.jsx(N,{id:"vin",...r("vin")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("vehicles"),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:m,children:m?"Tworzenie...":"Utwórz"})]})]})})]})]})},Dt=["ciezarowe","osobowe","przyczepa","naczepa"],fa=()=>{const{show:s}=P(),{refineCore:{onFinish:t,queryResult:r},register:n,handleSubmit:d,setValue:i,watch:l,formState:{errors:m,isSubmitting:c}}=B({refineCoreProps:{resource:"vehicles",action:"edit"}}),o=r?.isLoading??!0,u=r?.isError??!1,h=r?.data?.data,p=F({isLoading:o,isError:u});return p||(h?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("vehicles",h.id),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do szczegółów"]}),e.jsx(v,{children:e.jsx(k,{title:"Edycja pojazdu",description:`ID: #${String(h.id).slice(0,8)}`})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Nazwa",htmlFor:"name",error:m.name?.message,required:!0,children:e.jsx(N,{id:"name",...n("name",{required:"Wymagane"})})}),e.jsx(j,{label:"Typ",required:!0,children:e.jsxs(I,{defaultValue:h.type,onValueChange:a=>i("type",a),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz typ"})}),e.jsx(V,{children:Dt.map(a=>e.jsx(D,{value:a,children:a},a))})]})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Oddział (branch_id)",required:!0,error:m.branch_id?.message,children:e.jsx(q,{resource:"branches",value:l("branch_id")??h.branch_id,onChange:a=>i("branch_id",Number(a),{shouldValidate:!0}),renderLabel:a=>`${a.name}${a.city?" — "+a.city:""} (#${a.id})`,placeholder:"Wybierz oddział"})}),e.jsx(j,{label:"Rejestracja",htmlFor:"reg_plate",children:e.jsx(N,{id:"reg_plate",...n("reg_plate")})})]}),e.jsx(j,{label:"VIN",htmlFor:"vin",children:e.jsx(N,{id:"vin",...n("vin")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("vehicles",h.id),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:c,children:c?"Zapisywanie...":"Zapisz"})]})]})})]})]}):null)},qt=["vehicle","container","equipment"],Ge=["przeglad","oc","tacho","naprawa","usterka","inne"],Ft=()=>{const{tableQuery:{data:s,isLoading:t,isError:r},current:n,setCurrent:d,pageSize:i,setFilters:l}=Q({resource:Y,sorters:{initial:[{field:"due_at",order:"asc"}]}}),{create:m,edit:c,show:o}=P(),u=F({isLoading:t,isError:r});if(u)return u;const h=g=>l([{field:"asset_label",operator:"contains",value:g}]),p=g=>l(w=>{const U=(w||[]).filter(L=>L.field!=="service_kind");return g?[...U,{field:"service_kind",operator:"eq",value:g}]:U}),a=g=>l(w=>{const U=(w||[]).filter(L=>L.field!=="asset_kind");return g?[...U,{field:"asset_kind",operator:"eq",value:g}]:U});return e.jsxs($,{children:[e.jsxs(v,{children:[e.jsx(k,{title:"Serwis / Utrzymanie",description:"Terminy i historia"}),e.jsxs(x,{onClick:()=>m(Y),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj wpis"]})]}),e.jsxs(v,{className:"gap-3",children:[e.jsx(N,{placeholder:"Szukaj po zasobie…",className:"max-w-sm",onChange:g=>h(g.target.value)}),e.jsxs(I,{onValueChange:g=>p(g==="__clear__"?void 0:g),children:[e.jsx(A,{className:"w-56",children:e.jsx(W,{placeholder:"Filtr: typ serwisu"})}),e.jsxs(V,{children:[Ge.map(g=>e.jsx(D,{value:g,children:g},g)),e.jsx(D,{value:"__clear__",children:"Wyczyść"})]})]}),e.jsxs(I,{onValueChange:g=>a(g==="__clear__"?void 0:g),children:[e.jsx(A,{className:"w-56",children:e.jsx(W,{placeholder:"Filtr: zasób"})}),e.jsxs(V,{children:[qt.map(g=>e.jsx(D,{value:g,children:g},g)),e.jsx(D,{value:"__clear__",children:"Wyczyść"})]})]})]}),e.jsx(_,{children:s?.data?.map(g=>e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(k,{title:`${g.asset_label}`,description:g.service_kind,variant:"card"})}),e.jsx(S,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsxs(y,{variant:"outline",children:["SID #",g.service_id]}),e.jsxs(y,{variant:"secondary",children:[g.asset_kind," #",g.asset_id]}),g.branch_id&&e.jsxs(y,{variant:"outline",children:["oddział #",g.branch_id]}),g.done_at?e.jsxs(y,{variant:"outline",children:["zakończono ",new Date(g.done_at).toLocaleDateString()]}):e.jsxs(y,{variant:"destructive",children:[e.jsx(yr,{className:"w-3 h-3 mr-1"})," termin: ",g.due_at?new Date(g.due_at).toLocaleDateString():"—"]})]})}),e.jsx(X,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>o(Y,g.service_id),children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c(Y,g.service_id),children:e.jsx(M,{className:"w-4 h-4"})})]})})]},g.service_id))}),e.jsx(ie,{current:n,pageSize:i,total:s?.total||0,setCurrent:d,itemName:"wpisy"})]})},Tt=()=>{const{list:s}=P(),t=Ms(),{refineCore:{onFinish:r},register:n,handleSubmit:d,setValue:i,watch:l,formState:{errors:m,isSubmitting:c}}=B({refineCoreProps:{resource:va}});return de.useEffect(()=>{const o=new URLSearchParams(t.search),u=o.get("asset_id"),h=o.get("kind");u&&i("asset_id",Number(u),{shouldValidate:!0}),h&&i("kind",h,{shouldValidate:!0})},[t.search,i]),e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s(Y),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsx(v,{children:e.jsx(k,{title:"Nowy wpis serwisowy",description:"Termin/wykonanie dla zasobu"})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(r),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Zasób (assets)",required:!0,error:m.asset_id?.message,children:e.jsx(q,{resource:"assets",value:l("asset_id"),onChange:o=>i("asset_id",Number(o),{shouldValidate:!0}),renderLabel:o=>`${o.label} [${o.kind}] (#${o.id})`,placeholder:"Wybierz zasób"})}),e.jsx(j,{label:"Typ serwisu",required:!0,error:m.kind?.message,children:e.jsxs(I,{defaultValue:l("kind"),onValueChange:o=>i("kind",o,{shouldValidate:!0}),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz typ"})}),e.jsx(V,{children:Ge.map(o=>e.jsx(D,{value:o,children:o},o))})]})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Termin (due_at)",htmlFor:"due_at",children:e.jsx(N,{id:"due_at",type:"date",...n("due_at")})}),e.jsx(j,{label:"Wykonano (done_at)",htmlFor:"done_at",children:e.jsx(N,{id:"done_at",type:"date",...n("done_at")})})]}),e.jsx(j,{label:"Notatki",children:e.jsx(J,{rows:3,...n("notes")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s(Y),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:c,children:c?"Tworzenie...":"Utwórz"})]})]})})]})]})},At=()=>{const{show:s}=P(),{refineCore:{onFinish:t,queryResult:r},register:n,handleSubmit:d,setValue:i,watch:l,formState:{errors:m,isSubmitting:c}}=B({refineCoreProps:{resource:va,action:"edit"}}),o=r?.isLoading??!0,u=r?.isError??!1,h=r?.data?.data,p=F({isLoading:o,isError:u});return p||(h?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s(Y,h.id),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do szczegółów"]}),e.jsx(v,{children:e.jsx(k,{title:"Edycja wpisu serwisowego",description:`SID: #${h.id}`})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Zasób (assets)",required:!0,error:m.asset_id?.message,children:e.jsx(q,{resource:"assets",value:l("asset_id")??h.asset_id,onChange:a=>i("asset_id",Number(a),{shouldValidate:!0}),renderLabel:a=>`${a.label} [${a.kind}] (#${a.id})`,placeholder:"Wybierz zasób"})}),e.jsx(j,{label:"Typ serwisu",required:!0,error:m.kind?.message,children:e.jsxs(I,{defaultValue:h.kind,onValueChange:a=>i("kind",a,{shouldValidate:!0}),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz typ"})}),e.jsx(V,{children:Ge.map(a=>e.jsx(D,{value:a,children:a},a))})]})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Termin (due_at)",htmlFor:"due_at",children:e.jsx(N,{id:"due_at",type:"date",...n("due_at")})}),e.jsx(j,{label:"Wykonano (done_at)",htmlFor:"done_at",children:e.jsx(N,{id:"done_at",type:"date",...n("done_at")})})]}),e.jsx(j,{label:"Notatki",children:e.jsx(J,{rows:3,...n("notes")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s(Y,h.id),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:c,children:c?"Zapisywanie...":"Zapisz"})]})]})})]})]}):null)},Vt=()=>{const{queryResult:s}=re({resource:Y}),{list:t,edit:r}=P(),n=s?.isLoading??!0,d=s?.isError??!1,i=s?.data?.data,l=F({isLoading:n,isError:d});return l||(i?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>t(Y),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsxs(v,{children:[e.jsx(k,{title:`${i.asset_label}`,description:`SID: #${i.service_id}`}),e.jsxs(x,{variant:"outline",onClick:()=>r(Y,i.service_id),children:[e.jsx(M,{className:"w-4 h-4 mr-2"})," Edytuj"]})]}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Szczegóły"})}),e.jsxs(S,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{variant:"secondary",children:i.service_kind}),e.jsxs(y,{variant:"outline",children:[i.asset_kind," #",i.asset_id]}),i.branch_id&&e.jsxs(y,{variant:"outline",children:["oddział #",i.branch_id]}),i.done_at?e.jsx(y,{variant:"outline",children:"wykonano"}):e.jsxs(y,{variant:"destructive",children:["do: ",i.due_at?new Date(i.due_at).toLocaleDateString():"—"]})]}),e.jsx(O,{}),e.jsxs("div",{className:"text-sm space-y-1",children:[i.notes&&e.jsxs("div",{children:[e.jsx("b",{children:"Notatki:"})," ",i.notes]}),i.created_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Utworzono:"})," ",new Date(i.created_at).toLocaleString()]}),i.done_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Zakończono:"})," ",new Date(i.done_at).toLocaleString()]})]})]})]})]}):null)},Y="asset_maintenances",va="asset_service",is={name:Y,list:"/admin/maintenances",create:"/admin/maintenances/create",edit:"/admin/maintenances/edit/:id",show:"/admin/maintenances/show/:id",meta:{label:"Serwis / Utrzymanie"}},It=[e.jsx(b,{index:!0,element:e.jsx(Ft,{})},"maint-index"),e.jsx(b,{path:"create",element:e.jsx(Tt,{})},"maint-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(At,{})},"maint-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(Vt,{})},"maint-show")],Na=()=>{const{queryResult:s}=re({resource:"vehicles"}),{list:t,edit:r}=P(),n=ne(),d=s?.isLoading??!0,i=s?.isError??!1,l=s?.data?.data?.asset_id,m=me({resource:Y,filters:l?[{field:"asset_id",operator:"eq",value:l}]:[],sorters:[{field:"due_at",order:"asc"}],pagination:{current:1,pageSize:100},queryOptions:{enabled:!!l}}),c=F({isLoading:d,isError:i});if(c)return c;const o=s?.data?.data;if(!o)return null;const u=m.data?.data??[],h=u.filter(g=>!g.done_at&&g.due_at).sort((g,w)=>+new Date(g.due_at)-+new Date(w.due_at))[0],p=u.filter(g=>g.service_kind==="usterka"&&!g.done_at),a=u.filter(g=>g.done_at&&["naprawa","usterka","inne"].includes(g.service_kind)).sort((g,w)=>+new Date(w.done_at)-+new Date(g.done_at));return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>t("vehicles"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsxs(v,{children:[e.jsx(k,{title:o.name,description:`ID: #${o.id}`}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{variant:"outline",onClick:()=>r("vehicles",o.id),children:[e.jsx(M,{className:"w-4 h-4 mr-2"})," Edytuj"]}),e.jsxs(x,{variant:"outline",onClick:()=>n(`/admin/maintenances/create?asset_id=${o.asset_id}&kind=usterka`),children:[e.jsx(pe,{className:"w-4 h-4 mr-2"})," Zgłoś usterkę"]}),e.jsxs(x,{variant:"outline",onClick:()=>n(`/admin/maintenances/create?asset_id=${o.asset_id}`),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj wpis"]})]})]}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Szczegóły"})}),e.jsxs(S,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{variant:"secondary",children:o.type}),o.reg_plate&&e.jsx(y,{variant:"outline",children:o.reg_plate}),e.jsxs(y,{variant:"outline",children:["oddział #",o.branch_id]}),o.is_archived&&e.jsx(y,{variant:"destructive",children:"archiwum"})]}),e.jsx(O,{}),e.jsxs("div",{className:"text-sm space-y-1",children:[o.vin&&e.jsxs("div",{children:[e.jsx("b",{children:"VIN:"})," ",o.vin]}),o.created_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Utworzono:"})," ",new Date(o.created_at).toLocaleString()]}),o.updated_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Aktualizacja:"})," ",new Date(o.updated_at).toLocaleString()]})]})]})]}),e.jsxs(z,{className:"mt-4",children:[e.jsx(C,{children:e.jsx(E,{children:"Książka serwisowa"})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("b",{children:"Następny przegląd:"})," ",h?.due_at?new Date(h.due_at).toLocaleDateString():"—"]}),e.jsx(O,{}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium mb-2",children:"Aktywne zgłoszenia usterek"}),p.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"Brak aktywnych zgłoszeń."}):e.jsx("div",{className:"space-y-3",children:p.map(g=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium",children:g.service_kind}),e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>n(`/admin/maintenances/edit/${g.service_id}`),children:[e.jsx(He,{className:"w-4 h-4 mr-2"})," Zakończ"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Zgłoszono:"," ",g.created_at?new Date(g.created_at).toLocaleString():"—"]}),g.notes&&e.jsx("div",{className:"text-sm mt-2",children:g.notes})]},g.service_id))})]}),e.jsx(O,{}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium",children:"Historia napraw"}),e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>n(`/admin/maintenances/create?asset_id=${o.asset_id}&kind=naprawa`),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj wpis"]})]}),a.length===0?e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:"Brak zakończonych napraw."}):e.jsx("div",{className:"space-y-3 mt-2",children:a.map(g=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsx("div",{className:"font-medium",children:g.service_kind}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:g.done_at?new Date(g.done_at).toLocaleDateString():"—"}),g.notes&&e.jsx("div",{className:"text-sm mt-2",children:g.notes})]},g.service_id))})]})]})]})]})},Be={name:"vehicles",list:"/admin/vehicles",create:"/admin/vehicles/create",edit:"/admin/vehicles/edit/:id",show:"/admin/vehicles/show/:id",meta:{label:"Flota"}},_a=[e.jsx(b,{index:!0,element:e.jsx(ya,{})},"vehicles-index"),e.jsx(b,{path:"create",element:e.jsx(wa,{})},"vehicles-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(fa,{})},"vehicles-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(Na,{})},"vehicles-show")],Wt=()=>{const{tableQuery:{data:s,isLoading:t,isError:r},current:n,setCurrent:d,pageSize:i,setFilters:l}=Q({resource:"branches",sorters:{initial:[{field:"created_at",order:"desc"}]}}),{create:m,edit:c,show:o}=P(),u=F({isLoading:t,isError:r});return u||e.jsxs($,{children:[e.jsxs(v,{children:[e.jsx(k,{title:"Oddziały",description:"Lista placówek"}),e.jsxs(x,{onClick:()=>m("branches"),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj oddział"]})]}),e.jsx(v,{children:e.jsx(N,{placeholder:"Szukaj po nazwie...",className:"max-w-sm",onChange:h=>l([{field:"name",operator:"contains",value:h.target.value}])})}),e.jsx(_,{children:s?.data?.map(h=>e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(k,{title:h.name,description:h.city||"—",variant:"card"})}),e.jsx(S,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsxs(y,{variant:"outline",children:["ID #",h.id]}),h.is_archived&&e.jsx(y,{variant:"destructive",children:"archiwum"})]})}),e.jsx(X,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>o("branches",h.id),children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c("branches",h.id),children:e.jsx(M,{className:"w-4 h-4"})})]})})]},h.id))}),e.jsx(ie,{current:n,pageSize:i,total:s?.total||0,setCurrent:d,itemName:"oddziały"})]})},Ut=()=>{const{list:s}=P(),{refineCore:{onFinish:t},register:r,handleSubmit:n,formState:{errors:d,isSubmitting:i}}=B({refineCoreProps:{resource:"branches"}});return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("branches"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsx(v,{children:e.jsx(k,{title:"Nowy oddział",description:"Dodaj placówkę"})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:n(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Nazwa",htmlFor:"name",error:d.name?.message,required:!0,children:e.jsx(N,{id:"name",...r("name",{required:"Wymagane"})})}),e.jsx(j,{label:"Miasto",htmlFor:"city",children:e.jsx(N,{id:"city",...r("city")})})]}),e.jsx(j,{label:"Archiwum",children:e.jsx("input",{type:"checkbox",...r("is_archived")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("branches"),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:i,children:i?"Tworzenie...":"Utwórz"})]})]})})]})]})},Ot=()=>{const{show:s}=P(),{refineCore:{onFinish:t,queryResult:r},register:n,handleSubmit:d,formState:{errors:i,isSubmitting:l}}=B({refineCoreProps:{resource:"branches",action:"edit"}}),m=r?.isLoading??!0,c=r?.isError??!1,o=r?.data?.data,u=F({isLoading:m,isError:c});return u||(o?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("branches",o.id),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do szczegółów"]}),e.jsx(v,{children:e.jsx(k,{title:"Edycja oddziału",description:`ID: #${o.id}`})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Nazwa",htmlFor:"name",error:i.name?.message,required:!0,children:e.jsx(N,{id:"name",...n("name",{required:"Wymagane"})})}),e.jsx(j,{label:"Miasto",htmlFor:"city",children:e.jsx(N,{id:"city",...n("city")})})]}),e.jsx(j,{label:"Archiwum",children:e.jsx("input",{type:"checkbox",...n("is_archived")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("branches",o.id),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:l,children:l?"Zapisywanie...":"Zapisz"})]})]})})]})]}):null)},Bt=()=>{const{queryResult:s}=re({resource:"branches"}),{list:t,edit:r}=P(),n=s?.isLoading??!0,d=s?.isError??!1,i=s?.data?.data,l=F({isLoading:n,isError:d});return l||(i?e.jsxs(e.Fragment,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>t("branches"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsxs(v,{children:[e.jsx(k,{title:i.name,description:`ID: #${i.id}`}),e.jsxs(x,{variant:"outline",onClick:()=>r("branches",i.id),children:[e.jsx(M,{className:"w-4 h-4 mr-2"})," Edytuj"]})]}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Szczegóły"})}),e.jsxs(S,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[i.city&&e.jsx(y,{variant:"outline",children:i.city}),i.is_archived&&e.jsx(y,{variant:"destructive",children:"archiwum"})]}),e.jsx(O,{}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Utworzono:"})," ",new Date(i.created_at).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("b",{children:"Aktualizacja:"})," ",new Date(i.updated_at).toLocaleString()]})]})]})]})]}):null)},ns={name:"branches",list:"/admin/branches",create:"/admin/branches/create",edit:"/admin/branches/edit/:id",show:"/admin/branches/show/:id",meta:{label:"Oddziały"}},Mt=[e.jsx(b,{index:!0,element:e.jsx(Wt,{})},"branches-index"),e.jsx(b,{path:"create",element:e.jsx(Ut,{})},"branches-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(Ot,{})},"branches-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(Bt,{})},"branches-show")],Kt=["zakupy","sprzedaz","firmy_transportowe","inne"],ls="__clear__",ka=()=>{const{tableQuery:{data:s,isLoading:t,isError:r},current:n,setCurrent:d,pageSize:i,setFilters:l}=Q({resource:"clients",sorters:{initial:[{field:"created_at",order:"desc"}]}}),{create:m,edit:c,show:o}=P(),u=F({isLoading:t,isError:r});if(u)return u;const h=a=>l(g=>[...(g||[]).filter(w=>w.field!=="name"),{field:"name",operator:"contains",value:a}]),p=a=>l(g=>{const w=(g||[]).filter(U=>U.field!=="section");return a?[...w,{field:"section",operator:"eq",value:a}]:w});return e.jsxs($,{children:[e.jsxs(v,{children:[e.jsx(k,{title:"Klienci",description:"Baza klientów"}),e.jsxs(x,{onClick:()=>m("clients"),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj klienta"]})]}),e.jsxs(v,{className:"gap-3",children:[e.jsx(N,{placeholder:"Szukaj po nazwie...",className:"max-w-sm",onChange:a=>h(a.target.value)}),e.jsxs(I,{onValueChange:a=>p(a===ls?void 0:a),children:[e.jsx(A,{className:"w-56",children:e.jsx(W,{placeholder:"Filtr: sekcja (opcjonalnie)"})}),e.jsxs(V,{children:[Kt.map(a=>e.jsx(D,{value:a,children:a},a)),e.jsx(D,{value:ls,children:"Wyczyść filtr"})]})]})]}),e.jsx(_,{children:s?.data?.map(a=>e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(k,{title:a.name,description:a.email||a.phone||a.website||"—",variant:"card"})}),e.jsx(S,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsxs(y,{variant:"outline",children:["ID #",a.id]}),a.section&&e.jsx(y,{variant:"secondary",children:a.section}),a.category&&e.jsx(y,{variant:"outline",children:a.category}),a.branch_id&&e.jsxs(y,{variant:"outline",children:["oddział #",a.branch_id]}),a.is_archived&&e.jsx(y,{variant:"destructive",children:"archiwum"})]})}),e.jsx(X,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>o("clients",a.id),children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c("clients",a.id),children:e.jsx(M,{className:"w-4 h-4"})})]})})]},a.id))}),e.jsx(ie,{current:n,pageSize:i,total:s?.total||0,setCurrent:d,itemName:"klienci"})]})},Zt=["zakupy","sprzedaz","firmy_transportowe","inne"],za=()=>{const{list:s}=P(),{refineCore:{onFinish:t},register:r,handleSubmit:n,setValue:d,watch:i,formState:{errors:l,isSubmitting:m}}=B({refineCoreProps:{resource:"clients"}}),c=o=>d("branch_id",Number(o));return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("clients"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsx(v,{children:e.jsx(k,{title:"Nowy klient",description:"Dodaj klienta"})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:n(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Nazwa",htmlFor:"name",error:l.name?.message,required:!0,children:e.jsx(N,{id:"name",...r("name",{required:"Wymagane"})})}),e.jsx(j,{label:"Sekcja",required:!0,children:e.jsxs(I,{onValueChange:o=>d("section",o),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz sekcję"})}),e.jsx(V,{children:Zt.map(o=>e.jsx(D,{value:o,children:o},o))})]})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Kategoria",htmlFor:"category",children:e.jsx(N,{id:"category",...r("category")})}),e.jsx(j,{label:"Oddział (branch_id)",htmlFor:"branch_id",children:e.jsx(q,{resource:"branches",value:i("branch_id"),onChange:c,renderLabel:o=>`${o.name}${o.city?" — "+o.city:""} (#${o.id})`,placeholder:"Wybierz oddział (opcjonalnie)"})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Telefon",htmlFor:"phone",children:e.jsx(N,{id:"phone",...r("phone")})}),e.jsx(j,{label:"Email",htmlFor:"email",children:e.jsx(N,{id:"email",type:"email",...r("email")})}),e.jsx(j,{label:"WWW",htmlFor:"website",children:e.jsx(N,{id:"website",type:"url",...r("website")})})]}),e.jsx(j,{label:"Opis",children:e.jsx(J,{rows:3,...r("description")})}),e.jsx(j,{label:"Archiwum",children:e.jsx("input",{type:"checkbox",...r("is_archived")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("clients"),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:m,children:m?"Tworzenie...":"Utwórz"})]})]})})]})]})},Ht=["zakupy","sprzedaz","firmy_transportowe","inne"],Ca=()=>{const{show:s}=P(),{refineCore:{onFinish:t,queryResult:r},register:n,handleSubmit:d,setValue:i,watch:l,formState:{errors:m,isSubmitting:c}}=B({refineCoreProps:{resource:"clients",action:"edit"}}),o=r?.isLoading??!0,u=r?.isError??!1,h=r?.data?.data,p=F({isLoading:o,isError:u});if(p)return p;if(!h)return null;const a=g=>i("branch_id",Number(g));return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("clients",h.id),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do szczegółów"]}),e.jsx(v,{children:e.jsx(k,{title:"Edycja klienta",description:`ID: #${h.id}`})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Nazwa",htmlFor:"name",error:m.name?.message,required:!0,children:e.jsx(N,{id:"name",...n("name",{required:"Wymagane"})})}),e.jsx(j,{label:"Sekcja",required:!0,children:e.jsxs(I,{defaultValue:h.section,onValueChange:g=>i("section",g),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz sekcję"})}),e.jsx(V,{children:Ht.map(g=>e.jsx(D,{value:g,children:g},g))})]})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Kategoria",htmlFor:"category",children:e.jsx(N,{id:"category",...n("category")})}),e.jsx(j,{label:"Oddział (branch_id)",htmlFor:"branch_id",children:e.jsx(q,{resource:"branches",value:l("branch_id")??h.branch_id,onChange:a,renderLabel:g=>`${g.name}${g.city?" — "+g.city:""} (#${g.id})`,placeholder:"Wybierz oddział (opcjonalnie)"})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Telefon",htmlFor:"phone",children:e.jsx(N,{id:"phone",...n("phone")})}),e.jsx(j,{label:"Email",htmlFor:"email",children:e.jsx(N,{id:"email",type:"email",...n("email")})}),e.jsx(j,{label:"WWW",htmlFor:"website",children:e.jsx(N,{id:"website",type:"url",...n("website")})})]}),e.jsx(j,{label:"Opis",children:e.jsx(J,{rows:3,...n("description")})}),e.jsx(j,{label:"Archiwum",children:e.jsx("input",{type:"checkbox",...n("is_archived")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("clients",h.id),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:c,children:c?"Zapisywanie...":"Zapisz"})]})]})})]})]})},Sa=()=>{const{queryResult:s}=re({resource:"clients"}),{list:t,edit:r}=P(),n=s?.isLoading??!0,d=s?.isError??!1,i=s?.data?.data,l=F({isLoading:n,isError:d});return l||(i?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>t("clients"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsxs(v,{children:[e.jsx(k,{title:i.name,description:`ID: #${i.id}`}),e.jsxs(x,{variant:"outline",onClick:()=>r("clients",i.id),children:[e.jsx(M,{className:"w-4 h-4 mr-2"})," Edytuj"]})]}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Szczegóły"})}),e.jsxs(S,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[i.section&&e.jsx(y,{variant:"secondary",children:i.section}),i.category&&e.jsx(y,{variant:"outline",children:i.category}),i.branch_id&&e.jsxs(y,{variant:"outline",children:["oddział #",i.branch_id]}),i.is_archived&&e.jsx(y,{variant:"destructive",children:"archiwum"})]}),e.jsx(O,{}),e.jsxs("div",{className:"text-sm space-y-1",children:[i.phone&&e.jsxs("div",{children:[e.jsx("b",{children:"Telefon:"})," ",i.phone]}),i.email&&e.jsxs("div",{children:[e.jsx("b",{children:"Email:"})," ",i.email]}),i.website&&e.jsxs("div",{children:[e.jsx("b",{children:"WWW:"})," ",i.website]}),i.description&&e.jsxs("div",{children:[e.jsx("b",{children:"Opis:"})," ",i.description]}),i.account_owner&&e.jsxs("div",{children:[e.jsx("b",{children:"Opiekun (UUID):"})," ",i.account_owner]}),e.jsxs("div",{children:[e.jsx("b",{children:"Utworzono:"})," ",new Date(i.created_at).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("b",{children:"Aktualizacja:"})," ",new Date(i.updated_at).toLocaleString()]})]})]})]})]}):null)},Me={name:"clients",list:"/admin/clients",create:"/admin/clients/create",edit:"/admin/clients/edit/:id",show:"/admin/clients/show/:id",meta:{label:"Klienci"}},La=[e.jsx(b,{index:!0,element:e.jsx(ka,{})},"clients-index"),e.jsx(b,{path:"create",element:e.jsx(za,{})},"clients-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(Ca,{})},"clients-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(Sa,{})},"clients-show")],Qt=()=>{const{tableQuery:{data:s,isLoading:t,isError:r},current:n,setCurrent:d,pageSize:i,setFilters:l}=Q({resource:"users",sorters:{initial:[{field:"created_at",order:"desc"}]}}),{create:m,edit:c,show:o}=P(),u=F({isLoading:t,isError:r});return u||e.jsxs($,{children:[e.jsxs(v,{children:[e.jsx(k,{title:"Użytkownicy",description:"Konta i role"}),e.jsxs(x,{onClick:()=>m("users"),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj użytkownika"]})]}),e.jsx(v,{children:e.jsx(N,{placeholder:"Szukaj po e-mailu lub nazwie…",className:"max-w-sm",onChange:h=>l([{field:"email",operator:"contains",value:h.target.value}])})}),e.jsx(_,{children:s?.data?.map(h=>e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(k,{title:h.full_name,description:h.email,variant:"card"})}),e.jsx(S,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[h.role&&e.jsx(y,{variant:"secondary",children:h.role}),h.branch_id&&e.jsxs(y,{variant:"outline",children:["oddział #",h.branch_id]}),h.branch_name&&e.jsx(y,{variant:"outline",children:h.branch_name})]})}),e.jsx(X,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>o("users",h.id),children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c("users",h.id),children:e.jsx(M,{className:"w-4 h-4"})})]})})]},h.id))}),e.jsx(ie,{current:n,pageSize:i,total:s?.total||0,setCurrent:d,itemName:"użytkownicy"})]})},Gt=()=>{const{list:s}=P(),{refineCore:{onFinish:t},register:r,handleSubmit:n,formState:{errors:d,isSubmitting:i}}=B({refineCoreProps:{resource:"users"}});return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("users"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsx(v,{children:e.jsx(k,{title:"Nowy użytkownik",description:"Załóż konto (role dodasz po zapisaniu)"})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Dane podstawowe"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:n(t),children:[e.jsx(j,{label:"E-mail",htmlFor:"email",error:d.email?.message,required:!0,children:e.jsx(N,{id:"email",type:"email",...r("email",{required:"Wymagane"})})}),e.jsx(j,{label:"Imię i nazwisko",htmlFor:"full_name",children:e.jsx(N,{id:"full_name",...r("full_name")})}),e.jsx(j,{label:"Telefon",htmlFor:"phone",children:e.jsx(N,{id:"phone",...r("phone")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("users"),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:i,children:i?"Tworzenie...":"Utwórz"})]})]})})]})]})},Yt=["administrator","biuro","logistyk","handlowiec","kierowca_krotko","kierowca_dlugo","operator"],Xt=({userId:s})=>{const{tableQuery:t}=Q({resource:"user_roles",filters:{permanent:[{field:"user_id",operator:"eq",value:s}]},pagination:{current:1,pageSize:100},sorters:{initial:[{field:"assigned_at",order:"desc"}]}}),{mutate:r,isLoading:n}=nr(),{mutate:d}=lr(),[i,l]=f.useState(),[m,c]=f.useState(""),o=t.data?.data??[],u=f.useMemo(()=>!!i,[i]),h=()=>{i&&r({resource:"user_roles",values:{user_id:s,role:i,branch_id:m?Number(m):null},invalidates:["list","many","detail"]})};return e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Role użytkownika"})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.map(p=>e.jsxs("div",{className:"flex items-center gap-2 border rounded-xl px-2 py-1",children:[e.jsx(y,{variant:p.branch_id?"secondary":"outline",children:p.role}),p.branch_id&&e.jsxs(y,{variant:"outline",children:["oddział #",p.branch_id]}),e.jsx(x,{size:"sm",variant:"ghost",onClick:()=>d({resource:"user_roles",id:p.id,invalidates:["list","many","detail"]}),children:e.jsx(wr,{className:"w-4 h-4"})})]},p.id)),!o.length&&e.jsx("span",{className:"text-muted-foreground text-sm",children:"Brak ról"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[e.jsxs(I,{onValueChange:l,children:[e.jsx(A,{className:"w-56",children:e.jsx(W,{placeholder:"Wybierz rolę"})}),e.jsx(V,{children:Yt.map(p=>e.jsx(D,{value:p,children:p},p))})]}),e.jsx(N,{type:"number",placeholder:"Oddział (opcjonalnie, puste = global)",value:m,onChange:p=>c(p.target.value),className:"w-64"}),e.jsxs(x,{onClick:h,disabled:!u||n,children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["• Rola z ",e.jsx("i",{children:"pustym"})," oddziałem działa globalnie. • Można łączyć wiele ról (różne oddziały). • Administrator ma pełny dostęp."]})]})]})},Jt=()=>{const{show:s}=P(),{refineCore:{onFinish:t,queryResult:r},register:n,handleSubmit:d,formState:{errors:i,isSubmitting:l}}=B({refineCoreProps:{resource:"users",action:"edit"}}),m=r?.isLoading??!0,c=r?.isError??!1,o=r?.data?.data,u=F({isLoading:m,isError:c});return u||(o?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("users",o.id),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do szczegółów"]}),e.jsx(v,{children:e.jsx(k,{title:"Edycja użytkownika",description:o.email})}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Dane podstawowe"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(t),children:[e.jsx(j,{label:"Imię i nazwisko",htmlFor:"full_name",children:e.jsx(N,{id:"full_name",...n("full_name")})}),e.jsx(j,{label:"Telefon",htmlFor:"phone",children:e.jsx(N,{id:"phone",...n("phone")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("users",o.id),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:l,children:l?"Zapisywanie...":"Zapisz"})]})]})})]}),e.jsx(Xt,{userId:o.id})]})]}):null)},ei=()=>{const{queryResult:s}=re({resource:"users"}),{list:t,edit:r}=P(),n=s?.isLoading??!0,d=s?.isError??!1,i=s?.data?.data,l=Q({resource:"v_user_effective_roles",filters:{permanent:i?[{field:"user_id",operator:"eq",value:i.id}]:[]},pagination:{current:1,pageSize:100}}),m=F({isLoading:n,isError:d});if(m)return m;if(!i)return null;const c=l.tableQuery.data?.data??[];return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>t("users"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsxs(v,{children:[e.jsx(k,{title:i.full_name||i.email,description:i.email}),e.jsxs(x,{variant:"outline",onClick:()=>r("users",i.id),children:[e.jsx(M,{className:"w-4 h-4 mr-2"})," Edytuj"]})]}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Szczegóły"})}),e.jsxs(S,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[i.role&&e.jsxs(y,{variant:"secondary",children:["domyślna: ",i.role]}),i.branch_name&&e.jsx(y,{variant:"outline",children:i.branch_name}),i.branch_id&&e.jsxs(y,{variant:"outline",children:["oddział #",i.branch_id]})]}),e.jsx(O,{}),e.jsxs("div",{className:"text-sm space-y-1",children:[i.phone&&e.jsxs("div",{children:[e.jsx("b",{children:"Telefon:"})," ",i.phone]}),e.jsxs("div",{children:[e.jsx("b",{children:"Utworzono:"})," ",new Date(i.created_at).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("b",{children:"Aktualizacja:"})," ",new Date(i.updated_at).toLocaleString()]})]})]})]}),e.jsxs(z,{className:"mt-4",children:[e.jsx(C,{children:e.jsx(E,{children:"Wszystkie role (widok v_user_effective_roles)"})}),e.jsx(S,{className:"flex flex-wrap gap-2",children:c.length?c.map(o=>e.jsxs(y,{variant:o.branch_id?"secondary":"outline",children:[o.role,o.branch_id?` @#${o.branch_id}`:" (global)"]},`${o.role}-${o.branch_id??"global"}`)):e.jsx("span",{className:"text-sm text-muted-foreground",children:"Brak"})})]})]})},ds={name:"users",list:"/admin/users",create:"/admin/users/create",edit:"/admin/users/edit/:id",show:"/admin/users/show/:id",meta:{label:"Użytkownicy"}},si=[e.jsx(b,{index:!0,element:e.jsx(Qt,{})},"users-index"),e.jsx(b,{path:"create",element:e.jsx(Gt,{})},"users-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(Jt,{})},"users-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(ei,{})},"users-show")],ai=["na_placu","u_klienta","na_pojezdzie","serwis","inne"],ri=()=>{const{tableQuery:{data:s,isLoading:t,isError:r},current:n,setCurrent:d,pageSize:i,setFilters:l}=Q({resource:"containers",sorters:{initial:[{field:"created_at",order:"desc"}]}}),{create:m,edit:c,show:o}=P(),u=F({isLoading:t,isError:r});if(u)return u;const h=a=>l(g=>[...(g||[]).filter(w=>w.field!=="code"),{field:"code",operator:"contains",value:a}]),p=a=>l(g=>{const w=(g||[]).filter(U=>U.field!=="status");return a?[...w,{field:"status",operator:"eq",value:a}]:w});return e.jsxs($,{children:[e.jsxs(v,{children:[e.jsx(k,{title:"Kontenery",description:"Ewidencja i statusy"}),e.jsxs(x,{onClick:()=>m("containers"),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj kontener"]})]}),e.jsxs(v,{className:"gap-3",children:[e.jsx(N,{placeholder:"Szukaj po kodzie...",className:"max-w-sm",onChange:a=>h(a.target.value)}),e.jsxs(I,{onValueChange:a=>p(a==="__clear__"?void 0:a),children:[e.jsx(A,{className:"w-56",children:e.jsx(W,{placeholder:"Filtr: status (opcjonalnie)"})}),e.jsxs(V,{children:[ai.map(a=>e.jsx(D,{value:a,children:a},a)),e.jsx(D,{value:"__clear__",children:"Wyczyść filtr"})]})]})]}),e.jsx(_,{children:s?.data?.map(a=>e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(k,{title:a.code,description:a.category||"—",variant:"card"})}),e.jsx(S,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsxs(y,{variant:"outline",children:["ID #",a.id]}),a.status&&e.jsx(y,{variant:"secondary",children:a.status}),typeof a.tara_kg=="number"&&e.jsxs(y,{variant:"outline",children:[a.tara_kg," kg tara"]}),a.branch_id&&e.jsxs(y,{variant:"outline",children:["oddział #",a.branch_id]}),a.is_archived&&e.jsx(y,{variant:"destructive",children:"archiwum"})]})}),e.jsx(X,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>o("containers",a.id),children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c("containers",a.id),children:e.jsx(M,{className:"w-4 h-4"})})]})})]},a.id))}),e.jsx(ie,{current:n,pageSize:i,total:s?.total||0,setCurrent:d,itemName:"kontenery"})]})},ti=["na_placu","u_klienta","na_pojezdzie","serwis","inne"],ii=()=>{const{list:s}=P(),{refineCore:{onFinish:t},register:r,handleSubmit:n,setValue:d,watch:i,formState:{errors:l,isSubmitting:m}}=B({refineCoreProps:{resource:"containers"}});return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("containers"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsx(v,{children:e.jsx(k,{title:"Nowy kontener",description:"Dodaj kontener"})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:n(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Kod / numer",htmlFor:"code",error:l.code?.message,required:!0,children:e.jsx(N,{id:"code",...r("code",{required:"Wymagane"})})}),e.jsx(j,{label:"Kategoria",htmlFor:"category",children:e.jsx(N,{id:"category",...r("category")})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Oddział (branch_id)",required:!0,error:l.branch_id?.message,children:e.jsx(q,{resource:"branches",value:i("branch_id"),onChange:c=>d("branch_id",Number(c),{shouldValidate:!0}),renderLabel:c=>`${c.name}${c.city?" — "+c.city:""} (#${c.id})`,placeholder:"Wybierz oddział"})}),e.jsx(j,{label:"Tara [kg]",htmlFor:"tara_kg",children:e.jsx(N,{id:"tara_kg",type:"number",step:"1",...r("tara_kg",{valueAsNumber:!0})})})]}),e.jsx(j,{label:"Status",children:e.jsxs(I,{onValueChange:c=>d("status",c),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz status"})}),e.jsx(V,{children:ti.map(c=>e.jsx(D,{value:c,children:c},c))})]})}),e.jsx(j,{label:"Archiwum",children:e.jsx("input",{type:"checkbox",...r("is_archived")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("containers"),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:m,children:m?"Tworzenie...":"Utwórz"})]})]})})]})]})},ni=["na_placu","u_klienta","na_pojezdzie","serwis","inne"],li=()=>{const{show:s}=P(),{refineCore:{onFinish:t,queryResult:r},register:n,handleSubmit:d,setValue:i,watch:l,formState:{errors:m,isSubmitting:c}}=B({refineCoreProps:{resource:"containers",action:"edit"}}),o=r?.isLoading??!0,u=r?.isError??!1,h=r?.data?.data,p=F({isLoading:o,isError:u});return p||(h?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("containers",h.id),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do szczegółów"]}),e.jsx(v,{children:e.jsx(k,{title:"Edycja kontenera",description:`ID: #${h.id}`})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Kod / numer",htmlFor:"code",error:m.code?.message,required:!0,children:e.jsx(N,{id:"code",...n("code",{required:"Wymagane"})})}),e.jsx(j,{label:"Kategoria",htmlFor:"category",children:e.jsx(N,{id:"category",...n("category")})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Oddział (branch_id)",required:!0,error:m.branch_id?.message,children:e.jsx(q,{resource:"branches",value:l("branch_id")??h.branch_id,onChange:a=>i("branch_id",Number(a),{shouldValidate:!0}),renderLabel:a=>`${a.name}${a.city?" — "+a.city:""} (#${a.id})`,placeholder:"Wybierz oddział"})}),e.jsx(j,{label:"Tara [kg]",htmlFor:"tara_kg",children:e.jsx(N,{id:"tara_kg",type:"number",step:"1",...n("tara_kg",{valueAsNumber:!0})})})]}),e.jsx(j,{label:"Status",children:e.jsxs(I,{defaultValue:h.status,onValueChange:a=>i("status",a),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz status"})}),e.jsx(V,{children:ni.map(a=>e.jsx(D,{value:a,children:a},a))})]})}),e.jsx(j,{label:"Archiwum",children:e.jsx("input",{type:"checkbox",...n("is_archived")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("containers",h.id),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:c,children:c?"Zapisywanie...":"Zapisz"})]})]})})]})]}):null)},di="asset_maintenances",ci=()=>{const{queryResult:s}=re({resource:"containers"}),{list:t,edit:r}=P(),n=ne(),d=s?.isLoading??!0,i=s?.isError??!1,l=s?.data?.data,m=me({resource:di,filters:l?[{field:"asset_id",operator:"eq",value:l.asset_id}]:[],sorters:[{field:"due_at",order:"asc"}],pagination:{current:1,pageSize:100},queryOptions:{enabled:!!l}}),c=F({isLoading:d,isError:i});if(c)return c;if(!l)return null;const o=m.data?.data??[],u=o.filter(a=>!a.done_at&&a.due_at).sort((a,g)=>+new Date(a.due_at)-+new Date(g.due_at))[0],h=o.filter(a=>a.service_kind==="usterka"&&!a.done_at),p=o.filter(a=>a.done_at&&["naprawa","usterka","inne"].includes(a.service_kind)).sort((a,g)=>+new Date(g.done_at)-+new Date(a.done_at));return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>t("containers"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsxs(v,{children:[e.jsx(k,{title:l.code,description:`ID: #${l.id}`}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{variant:"outline",onClick:()=>r("containers",l.id),children:[e.jsx(M,{className:"w-4 h-4 mr-2"})," Edytuj"]}),e.jsxs(x,{variant:"outline",onClick:()=>n(`/admin/maintenances/create?asset_type=container&asset_id=${l.asset_id}&type=usterka&title=${encodeURIComponent(`Usterka: ${l.code}`)}`),children:[e.jsx(pe,{className:"w-4 h-4 mr-2"})," Zgłoś usterkę"]}),e.jsxs(x,{variant:"outline",onClick:()=>n(`/admin/maintenances/create?asset_type=container&asset_id=${l.asset_id}&title=${encodeURIComponent(`Wpis serwisowy: ${l.code}`)}`),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj wpis"]})]})]}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Szczegóły"})}),e.jsxs(S,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[l.category&&e.jsx(y,{variant:"outline",children:l.category}),l.status&&e.jsx(y,{variant:"secondary",children:l.status}),typeof l.tara_kg=="number"&&e.jsxs(y,{variant:"outline",children:[l.tara_kg," kg"]}),e.jsxs(y,{variant:"outline",children:["oddział #",l.branch_id]}),l.is_archived&&e.jsx(y,{variant:"destructive",children:"archiwum"})]}),e.jsx(O,{}),e.jsxs("div",{className:"text-sm space-y-1",children:[l.created_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Utworzono:"})," ",new Date(l.created_at).toLocaleString()]}),l.updated_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Aktualizacja:"})," ",new Date(l.updated_at).toLocaleString()]})]})]})]}),e.jsxs(z,{className:"mt-4",children:[e.jsx(C,{children:e.jsx(E,{children:"Książka serwisowa"})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("b",{children:"Następny przegląd:"})," ",u?.due_at?new Date(u.due_at).toLocaleDateString():"—"]}),e.jsx(O,{}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium mb-2",children:"Aktywne zgłoszenia usterek"}),h.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"Brak aktywnych zgłoszeń."}):e.jsx("div",{className:"space-y-3",children:h.map(a=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium",children:a.service_kind}),e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>n(`/admin/maintenances/edit/${a.service_id}`),children:[e.jsx(He,{className:"w-4 h-4 mr-2"})," Zakończ"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Zgłoszono: ",a.created_at?new Date(a.created_at).toLocaleString():"—"]}),a.notes&&e.jsx("div",{className:"text-sm mt-2",children:a.notes})]},a.service_id))})]}),e.jsx(O,{}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium",children:"Historia napraw"}),e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>n(`/admin/maintenances/create?asset_type=container&asset_id=${l.asset_id}&type=naprawa&title=${encodeURIComponent("Naprawa – "+l.code)}`),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj wpis"]})]}),p.length===0?e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:"Brak zakończonych napraw."}):e.jsx("div",{className:"space-y-3 mt-2",children:p.map(a=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsx("div",{className:"font-medium",children:a.service_kind}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:a.done_at?new Date(a.done_at).toLocaleDateString():"—"}),a.notes&&e.jsx("div",{className:"text-sm mt-2",children:a.notes})]},a.service_id))})]})]})]})]})},cs={name:"containers",list:"/admin/containers",create:"/admin/containers/create",edit:"/admin/containers/edit/:id",show:"/admin/containers/show/:id",meta:{label:"Kontenery"}},oi=[e.jsx(b,{index:!0,element:e.jsx(ri,{})},"containers-index"),e.jsx(b,{path:"create",element:e.jsx(ii,{})},"containers-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(li,{})},"containers-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(ci,{})},"containers-show")],hi=["transport","plac"],xi=["nowe","w_realizacji","zakonczone","anulowane"],ui=()=>{const{tableQuery:{data:s,isLoading:t,isError:r},setFilters:n}=Q({resource:"tasks",sorters:{initial:[{field:"start_at",order:"desc"}]}}),d=F({isLoading:t,isError:r});if(d)return d;const i=o=>{n(u=>{const h=(u||[]).filter(a=>a.field!=="title");return o?.trim()?[...h,{field:"title",operator:"contains",value:o.trim()}]:h})},l=o=>{n(u=>{const h=(u||[]).filter(a=>a.field!=="branch_id");return o&&o!==""?[...h,{field:"branch_id",operator:"eq",value:Number(o)}]:h})},m=o=>{n(u=>{const h=(u||[]).filter(a=>a.field!=="type");return o&&o!==""?[...h,{field:"type",operator:"eq",value:o}]:h})},c=o=>{n(u=>{const h=(u||[]).filter(a=>a.field!=="status");return o&&o!==""?[...h,{field:"status",operator:"eq",value:o}]:h})};return e.jsxs($,{children:[e.jsx(v,{children:e.jsx(k,{title:"Kalendarz / Plan",description:"Filtrowanie i przegląd zadań"})}),e.jsxs(v,{className:"gap-3",children:[e.jsx("div",{className:"min-w-[260px]",children:e.jsx(q,{resource:"branches",placeholder:"Filtr: oddział (opcjonalnie)",onChange:l,renderLabel:o=>`${o.name}${o.city?" — "+o.city:""} (#${o.id})`})}),e.jsxs(I,{onValueChange:o=>m(o),children:[e.jsx(A,{className:"w-56",children:e.jsx(W,{placeholder:"Filtr: typ (opcjonalnie)"})}),e.jsxs(V,{children:[hi.map(o=>e.jsx(D,{value:o,children:o},o)),e.jsx(D,{value:"__clear_type__",children:"Wyczyść filtr typu"})]})]}),e.jsxs(I,{onValueChange:o=>c(o==="__clear_status__"?void 0:o),children:[e.jsx(A,{className:"w-56",children:e.jsx(W,{placeholder:"Filtr: status (opcjonalnie)"})}),e.jsxs(V,{children:[xi.map(o=>e.jsx(D,{value:o,children:o},o)),e.jsx(D,{value:"__clear_status__",children:"Wyczyść filtr statusu"})]})]}),e.jsx(N,{className:"max-w-sm",placeholder:"Szukaj po tytule…",onChange:o=>i(o.target.value)})]}),e.jsx(_,{children:s?.data?.map(o=>e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{className:"text-base",children:o.title})}),e.jsxs(S,{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(y,{variant:"secondary",children:o.type}),e.jsx(y,{variant:"outline",children:o.status}),e.jsxs(y,{variant:"outline",children:["oddział #",o.branch_id]}),o.assigned_vehicle_id&&e.jsxs(y,{variant:"outline",children:["pojazd #",o.assigned_vehicle_id]}),o.assigned_container_id&&e.jsxs(y,{variant:"outline",children:["kontener #",o.assigned_container_id]})]}),e.jsx(O,{}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Start:"})," ",new Date(o.start_at).toLocaleString()]}),o.end_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Koniec:"})," ",new Date(o.end_at).toLocaleString()]}),o.assigned_driver&&e.jsxs("div",{children:[e.jsx("b",{children:"Kierowca (UUID):"})," ",o.assigned_driver]})]})]})]},o.id))})]})},mi=ui,os={name:"calendar",list:"/admin/calendar/weekly",meta:{label:"Kalendarz"}},ji=[e.jsx(b,{path:"weekly",element:e.jsx(mi,{})},"calendar-weekly")],pi=()=>{const{tableQuery:{data:s,isLoading:t,isError:r},current:n,setCurrent:d,pageSize:i,setFilters:l}=Q({resource:"price_lists",sorters:{initial:[{field:"created_at",order:"desc"}]}}),{create:m,edit:c,show:o}=P(),u=F({isLoading:t,isError:r});return u||e.jsxs($,{children:[e.jsxs(v,{children:[e.jsx(k,{title:"Cenniki",description:"Wersje cenników"}),e.jsxs(x,{onClick:()=>m("price_lists"),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Nowa wersja"]})]}),e.jsx(v,{children:e.jsx(N,{placeholder:"Szukaj po nazwie...",className:"max-w-sm",onChange:h=>l([{field:"title",operator:"contains",value:h.target.value}])})}),e.jsx(_,{children:s?.data?.map(h=>e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(k,{title:h.title,description:h.version_tag||"—",variant:"card"})}),e.jsx(S,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(y,{variant:"outline",children:["ID #",h.id]}),h.branch_id&&e.jsxs(y,{variant:"outline",children:["oddział #",h.branch_id]})]})}),e.jsx(X,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>o("price_lists",h.id),children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c("price_lists",h.id),children:e.jsx(M,{className:"w-4 h-4"})})]})})]},h.id))}),e.jsx(ie,{current:n,pageSize:i,total:s?.total||0,setCurrent:d,itemName:"cenniki"})]})},gi=()=>{const{list:s}=P(),{data:t}=Se(),{refineCore:{onFinish:r},register:n,handleSubmit:d,setValue:i,watch:l,formState:{errors:m,isSubmitting:c}}=B({refineCoreProps:{resource:"price_lists"}}),o=u=>r({...u,created_by:t?.id});return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("price_lists"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsx(v,{children:e.jsx(k,{title:"Nowa wersja cennika",description:"Utwórz cennik (rich-text)"})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(o),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Nazwa",htmlFor:"title",error:m.title?.message,required:!0,children:e.jsx(N,{id:"title",...n("title",{required:"Wymagane"})})}),e.jsx(j,{label:"Oddział (opcjonalnie)",children:e.jsx(q,{resource:"branches",value:l("branch_id"),onChange:u=>i("branch_id",u?Number(u):null),renderLabel:u=>`${u.name}${u.city?" — "+u.city:""} (#${u.id})`,placeholder:"Globalny lub przypisany do oddziału"})})]}),e.jsx(_,{variant:"1-2-2",children:e.jsx(j,{label:"Etykieta wersji",htmlFor:"version_tag",children:e.jsx(N,{id:"version_tag",...n("version_tag")})})}),e.jsx(j,{label:"Treść cennika (rich-text)",error:m.content_rich?.message,required:!0,children:e.jsx(J,{rows:10,...n("content_rich",{required:"Wymagane"}),placeholder:"Wklej/napisz treść cennika. Obsługa RTE do podmiany w kolejnym kroku."})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("price_lists"),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:c||!t?.id,children:c?"Tworzenie...":"Utwórz"})]})]})})]})]})},bi=()=>{const{show:s}=P(),{refineCore:{onFinish:t,queryResult:r},register:n,handleSubmit:d,setValue:i,watch:l,formState:{errors:m,isSubmitting:c}}=B({refineCoreProps:{resource:"price_lists",action:"edit"}}),o=r?.isLoading??!0,u=r?.isError??!1,h=r?.data?.data,p=F({isLoading:o,isError:u});return p||(h?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("price_lists",h.id),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do szczegółów"]}),e.jsx(v,{children:e.jsx(k,{title:"Edycja cennika",description:`ID: #${h.id}`})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Nazwa",htmlFor:"title",error:m.title?.message,required:!0,children:e.jsx(N,{id:"title",...n("title",{required:"Wymagane"})})}),e.jsx(j,{label:"Oddział (opcjonalnie)",children:e.jsx(q,{resource:"branches",value:l("branch_id")??h.branch_id,onChange:a=>i("branch_id",a?Number(a):null),renderLabel:a=>`${a.name}${a.city?" — "+a.city:""} (#${a.id})`,placeholder:"Globalny lub przypisany do oddziału"})})]}),e.jsx(_,{variant:"1-2-2",children:e.jsx(j,{label:"Etykieta wersji",htmlFor:"version_tag",children:e.jsx(N,{id:"version_tag",...n("version_tag")})})}),e.jsx(j,{label:"Treść cennika (rich-text)",error:m.content_rich?.message,required:!0,children:e.jsx(J,{rows:10,...n("content_rich",{required:"Wymagane"})})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("price_lists",h.id),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:c,children:c?"Zapisywanie...":"Zapisz"})]})]})})]})]}):null)},yi=()=>{const{queryResult:s}=re({resource:"price_lists"}),{list:t,edit:r}=P(),n=s?.isLoading??!0,d=s?.isError??!1,i=s?.data?.data,l=F({isLoading:n,isError:d});return l||(i?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>t("price_lists"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsxs(v,{children:[e.jsx(k,{title:i.title,description:`ID: #${i.id}`}),e.jsxs(x,{variant:"outline",onClick:()=>r("price_lists",i.id),children:[e.jsx(M,{className:"w-4 h-4 mr-2"})," Edytuj"]})]}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Szczegóły"})}),e.jsxs(S,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[i.version_tag&&e.jsx(y,{variant:"outline",children:i.version_tag}),i.branch_id&&e.jsxs(y,{variant:"outline",children:["oddział #",i.branch_id]})]}),e.jsx(O,{}),i.content_rich?e.jsx("div",{className:"prose max-w-none whitespace-pre-wrap",children:i.content_rich}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Brak treści"})]})]})]}):null)},hs={name:"price_lists",list:"/admin/pricelists",create:"/admin/pricelists/create",edit:"/admin/pricelists/edit/:id",show:"/admin/pricelists/show/:id",meta:{label:"Cenniki"}},wi=[e.jsx(b,{index:!0,element:e.jsx(pi,{})},"pricelists-index"),e.jsx(b,{path:"create",element:e.jsx(gi,{})},"pricelists-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(bi,{})},"pricelists-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(yi,{})},"pricelists-show")],fi=()=>{const{tableQuery:{data:s,isLoading:t,isError:r},current:n,setCurrent:d,pageSize:i,setFilters:l}=Q({resource:"yard_equipment",sorters:{initial:[{field:"created_at",order:"desc"}]}}),{create:m,edit:c,show:o}=P(),u=ne(),h=F({isLoading:t,isError:r});if(h)return h;const p=a=>l((g=[])=>[...g.filter(U=>U.field!=="name"),{field:"name",operator:"contains",value:a}]);return e.jsxs($,{children:[e.jsxs(v,{children:[e.jsx(k,{title:"Sprzęt placowy",description:"Maszyny / urządzenia na placu"}),e.jsxs(x,{onClick:()=>m("yard_equipment"),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj sprzęt"]})]}),e.jsx(v,{className:"gap-3",children:e.jsx(N,{placeholder:"Szukaj po nazwie…",className:"max-w-sm",onChange:a=>p(a.target.value)})}),e.jsx(_,{children:s?.data?.map(a=>e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(k,{title:a.name,description:"—",variant:"card"})}),e.jsx(S,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsxs(y,{variant:"outline",children:["ID #",a.id]}),a.type&&e.jsx(y,{variant:"secondary",children:a.type}),a.branch_id&&e.jsxs(y,{variant:"outline",children:["oddział #",a.branch_id]}),a.is_archived?e.jsx(y,{variant:"destructive",children:"archiwum"}):e.jsx(y,{variant:"outline",children:"dostępny"})]})}),e.jsx(X,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>o("yard_equipment",a.id),children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c("yard_equipment",a.id),children:e.jsx(M,{className:"w-4 h-4"})}),a.asset_id&&e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>u(`/admin/maintenances/create?asset_id=${a.asset_id}&kind=usterka`),children:[e.jsx(pe,{className:"w-4 h-4 mr-1"})," Zgłoś usterkę"]})]})})]},a.id))}),e.jsx(ie,{current:n,pageSize:i,total:s?.total||0,setCurrent:d,itemName:"pozycje"})]})},vi=["koparka","wozek_widlowy","prasa","inne"],xs=[{value:"dostepny",label:"Dostępny",archived:!1},{value:"archiwum",label:"Archiwum",archived:!0}],Ni=()=>{const{list:s}=P(),{refineCore:{onFinish:t},register:r,handleSubmit:n,setValue:d,watch:i,formState:{errors:l,isSubmitting:m}}=B({refineCoreProps:{resource:"yard_equipment"}});return de.useEffect(()=>d("is_archived",!1),[d]),e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("yard_equipment"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsx(v,{children:e.jsx(k,{title:"Nowa maszyna",description:"Dodaj sprzęt placowy"})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Dane podstawowe"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:n(t),children:[e.jsx("input",{type:"hidden",...r("is_archived")}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Nazwa",htmlFor:"name",error:l.name?.message,required:!0,children:e.jsx(N,{id:"name",...r("name",{required:"Wymagane"})})}),e.jsx(j,{label:"Kategoria (type)",required:!0,children:e.jsxs(I,{onValueChange:c=>d("type",c,{shouldValidate:!0}),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz typ"})}),e.jsx(V,{children:vi.map(c=>e.jsx(D,{value:c,children:c},c))})]})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Oddział (branch_id)",required:!0,error:l.branch_id?.message,children:e.jsx(q,{resource:"branches",value:i("branch_id"),onChange:c=>d("branch_id",Number(c),{shouldValidate:!0}),renderLabel:c=>`${c.name}${c.city?" — "+c.city:""} (#${c.id})`,placeholder:"Wybierz oddział"})}),e.jsx(j,{label:"Status",children:e.jsxs(I,{defaultValue:"dostepny",onValueChange:c=>{const o=xs.find(u=>u.value===c);d("is_archived",!!o?.archived,{shouldValidate:!0})},children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz status"})}),e.jsx(V,{children:xs.map(c=>e.jsx(D,{value:c.value,children:c.label},c.value))})]})})]}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("yard_equipment"),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:m,children:m?"Tworzenie...":"Utwórz"})]})]})})]})]})},_i=["koparka","wozek_widlowy","prasa","inne"],us=[{value:"dostepny",label:"Dostępny",archived:!1},{value:"archiwum",label:"Archiwum",archived:!0}],ki=()=>{const{show:s}=P(),{refineCore:{onFinish:t,queryResult:r},register:n,handleSubmit:d,setValue:i,watch:l,formState:{errors:m,isSubmitting:c}}=B({refineCoreProps:{resource:"yard_equipment",action:"edit"}}),o=r?.isLoading??!0,u=r?.isError??!1,h=r?.data?.data,p=F({isLoading:o,isError:u});return p||(h?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("yard_equipment",h.id),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do szczegółów"]}),e.jsx(v,{children:e.jsx(k,{title:"Edycja maszyny",description:`ID: #${h.id}`})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Dane podstawowe"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(t),children:[e.jsx("input",{type:"hidden",...n("is_archived")}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Nazwa",htmlFor:"name",error:m.name?.message,required:!0,children:e.jsx(N,{id:"name",...n("name",{required:"Wymagane"})})}),e.jsx(j,{label:"Kategoria (type)",required:!0,children:e.jsxs(I,{defaultValue:h.type,onValueChange:a=>i("type",a,{shouldValidate:!0}),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz typ"})}),e.jsx(V,{children:_i.map(a=>e.jsx(D,{value:a,children:a},a))})]})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Oddział (branch_id)",required:!0,error:m.branch_id?.message,children:e.jsx(q,{resource:"branches",value:l("branch_id")??h.branch_id,onChange:a=>i("branch_id",Number(a),{shouldValidate:!0}),renderLabel:a=>`${a.name}${a.city?" — "+a.city:""} (#${a.id})`,placeholder:"Wybierz oddział"})}),e.jsx(j,{label:"Status",children:e.jsxs(I,{defaultValue:h.is_archived?"archiwum":"dostepny",onValueChange:a=>{const g=us.find(w=>w.value===a);i("is_archived",!!g?.archived,{shouldValidate:!0})},children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz status"})}),e.jsx(V,{children:us.map(a=>e.jsx(D,{value:a.value,children:a.label},a.value))})]})})]}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("yard_equipment",h.id),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:c,children:c?"Zapisywanie...":"Zapisz"})]})]})})]})]}):null)},zi="asset_maintenances",Ci=()=>{const{queryResult:s}=re({resource:"yard_equipment"}),{list:t,edit:r}=P(),n=ne(),d=s?.isLoading??!0,i=s?.isError??!1,l=s?.data?.data,c=me({resource:zi,filters:l?[{field:"asset_id",operator:"eq",value:l.asset_id}]:[],sorters:[{field:"due_at",order:"asc"}],pagination:{current:1,pageSize:100},queryOptions:{enabled:!!l}}).data?.data??[],o=c.filter(a=>!a.done_at&&a.due_at).sort((a,g)=>+new Date(a.due_at)-+new Date(g.due_at))[0],u=c.filter(a=>a.service_kind==="usterka"&&!a.done_at),h=c.filter(a=>a.done_at&&["naprawa","usterka","inne"].includes(a.service_kind)).sort((a,g)=>+new Date(g.done_at)-+new Date(a.done_at)),p=F({isLoading:d,isError:i});return p||(l?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>t("yard_equipment"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsxs(v,{children:[e.jsx(k,{title:l.name,description:`ID: #${l.id}`}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{variant:"outline",onClick:()=>r("yard_equipment",l.id),children:[e.jsx(M,{className:"w-4 h-4 mr-2"})," Edytuj"]}),e.jsxs(x,{variant:"outline",onClick:()=>n(`/admin/maintenances/create?asset_type=equipment&asset_id=${l.asset_id}&type=usterka&title=${encodeURIComponent(`Usterka: ${l.name}`)}`),children:[e.jsx(pe,{className:"w-4 h-4 mr-2"})," Zgłoś usterkę"]}),e.jsxs(x,{variant:"outline",onClick:()=>n(`/admin/maintenances/create?asset_type=equipment&asset_id=${l.asset_id}&title=${encodeURIComponent(`Wpis serwisowy: ${l.name}`)}`),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj wpis"]})]})]}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Szczegóły"})}),e.jsxs(S,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{variant:"secondary",children:l.type}),e.jsxs(y,{variant:"outline",children:["oddział #",l.branch_id]}),l.is_archived?e.jsx(y,{variant:"destructive",children:"archiwum"}):e.jsx(y,{variant:"outline",children:"dostępny"})]}),e.jsx(O,{}),e.jsxs("div",{className:"text-sm space-y-1",children:[l.created_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Utworzono:"})," ",new Date(l.created_at).toLocaleString()]}),l.updated_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Aktualizacja:"})," ",new Date(l.updated_at).toLocaleString()]})]})]})]}),e.jsxs(z,{className:"mt-4",children:[e.jsx(C,{children:e.jsx(E,{children:"Książka serwisowa"})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("b",{children:"Następny przegląd:"})," ",o?.due_at?new Date(o.due_at).toLocaleDateString():"—"]}),e.jsx(O,{}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium mb-2",children:"Aktywne zgłoszenia usterek"}),u.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"Brak aktywnych zgłoszeń."}):e.jsx("div",{className:"space-y-3",children:u.map(a=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium",children:a.service_kind}),e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>n(`/admin/maintenances/edit/${a.service_id}`),children:[e.jsx(He,{className:"w-4 h-4 mr-2"})," Zakończ"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Zgłoszono: ",a.created_at?new Date(a.created_at).toLocaleString():"—"]}),a.notes&&e.jsx("div",{className:"text-sm mt-2",children:a.notes})]},a.service_id))})]}),e.jsx(O,{}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium",children:"Historia napraw"}),e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>n(`/admin/maintenances/create?asset_type=equipment&asset_id=${l.asset_id}&type=naprawa&title=${encodeURIComponent("Naprawa – "+l.name)}`),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Dodaj wpis"]})]}),h.length===0?e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:"Brak zakończonych napraw."}):e.jsx("div",{className:"space-y-3 mt-2",children:h.map(a=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsx("div",{className:"font-medium",children:a.service_kind}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:a.done_at?new Date(a.done_at).toLocaleDateString():"—"}),a.notes&&e.jsx("div",{className:"text-sm mt-2",children:a.notes})]},a.service_id))})]})]})]})]}):null)},ms={name:"yard_equipment",list:"/admin/equipment",create:"/admin/equipment/create",edit:"/admin/equipment/edit/:id",show:"/admin/equipment/show/:id",meta:{label:"Sprzęt placowy"}},Si=[e.jsx(b,{index:!0,element:e.jsx(fi,{})},"equipment-index"),e.jsx(b,{path:"create",element:e.jsx(Ni,{})},"equipment-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(ki,{})},"equipment-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(Ci,{})},"equipment-show")],Li="dispatches",Ri=["plan","w_drodze","zaladowany","rozladowany","zakonczony","anulowany"],Ei=()=>{const{tableQuery:{data:s,isLoading:t,isError:r},current:n,setCurrent:d,pageSize:i,setFilters:l}=Q({resource:"dispatches",meta:{table:Li},sorters:{initial:[{field:"start_at",order:"desc"}]}}),{create:m,edit:c,show:o}=P(),u=F({isLoading:t,isError:r});if(u)return u;const h=a=>l([{field:"title",operator:"contains",value:a}]),p=a=>l(g=>{const w=(g||[]).filter(U=>U.field!=="status");return a?[...w,{field:"status",operator:"eq",value:a}]:w});return e.jsxs($,{children:[e.jsxs(v,{children:[e.jsx(k,{title:"Wywozy",description:"Transport długodystansowy"}),e.jsxs(x,{onClick:()=>m("dispatches"),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Nowy wywóz"]})]}),e.jsxs(v,{className:"gap-3",children:[e.jsx(N,{placeholder:"Szukaj po tytule…",className:"max-w-sm",onChange:a=>h(a.target.value)}),e.jsxs(I,{onValueChange:a=>p(a==="__clear__"?void 0:a),children:[e.jsx(A,{className:"w-56",children:e.jsx(W,{placeholder:"Filtr: status (opcjonalnie)"})}),e.jsxs(V,{children:[Ri.map(a=>e.jsx(D,{value:a,children:a},a)),e.jsx(D,{value:"__clear__",children:"Wyczyść filtr"})]})]})]}),e.jsx(_,{children:s?.data?.map((a,g)=>{const w=(n-1)*i+g+1;return e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(k,{title:a.title,description:`Start: ${new Date(a.start_at).toLocaleString()}`,variant:"card"})}),e.jsxs(S,{children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs(y,{variant:"outline",children:["ID #",a.id]}),a.status&&e.jsx(y,{variant:"secondary",children:a.status}),a.vehicle_id&&e.jsxs(y,{variant:"outline",children:["pojazd #",a.vehicle_id]}),a.trailer_id&&e.jsxs(y,{variant:"outline",children:["naczepa #",a.trailer_id]}),a.external_transport_client_id&&e.jsxs(y,{variant:"outline",children:["zewn. transport #",a.external_transport_client_id]})]}),e.jsx($i,{lp:w,dispatch:a})]}),e.jsx(X,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>o("dispatches",a.id),children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c("dispatches",a.id),children:e.jsx(M,{className:"w-4 h-4"})})]})})]},a.id)})}),e.jsx(ie,{current:n,pageSize:i,total:s?.total||0,setCurrent:d,itemName:"wywozy"})]})},$i=({lp:s,dispatch:t})=>e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsx(xe,{label:"Lp.",children:e.jsx("span",{children:s})}),e.jsx(xe,{label:"Kierowca",children:t.driver_id?e.jsx(Pi,{id:t.driver_id}):e.jsx("span",{children:"—"})}),e.jsx(xe,{label:"Skąd",children:e.jsx(Di,{id:t.branch_id})}),e.jsx(xe,{label:"Dokąd / Materiał / Powrót / Dokąd (powrót)",children:e.jsx(qi,{dispatchId:t.id})}),e.jsx(xe,{label:"Notatki",children:e.jsx("span",{children:t.notes||"—"})}),e.jsx(xe,{label:"Stawka za fracht",children:typeof t.freight_rate=="number"?e.jsxs("span",{children:[t.freight_rate.toFixed(2)," ",t.freight_currency||"PLN"]}):e.jsx("span",{children:"—"})})]}),xe=({label:s,children:t})=>e.jsxs("div",{className:"grid grid-cols-12 items-start gap-2",children:[e.jsx("div",{className:"col-span-12 md:col-span-3 text-muted-foreground",children:s}),e.jsx("div",{className:"col-span-12 md:col-span-9",children:t}),e.jsx(O,{className:"col-span-12 my-1"})]}),Pi=({id:s})=>{const{data:t,isLoading:r}=Ks({resource:"users",id:s,meta:{select:"full_name,email,id"},queryOptions:{enabled:!!s}});if(r)return e.jsx("span",{children:"Ładowanie…"});const n=t?.data;if(!n)return e.jsxs("span",{children:["#",String(s).slice(0,8)]});const d=n.full_name||n.email||`#${String(n.id||s).slice(0,8)}`;return e.jsx("span",{children:d})},Di=({id:s})=>{const{data:t,isLoading:r}=Ks({resource:"branches",id:s,meta:{select:"name,city,id"},queryOptions:{enabled:!!s}});if(r)return e.jsx("span",{children:"Ładowanie…"});const n=t?.data;return n?e.jsxs("span",{children:[n.name,n.city?` — ${n.city}`:""," (#",n.id,")"]}):e.jsxs("span",{children:["oddział #",s]})},qi=({dispatchId:s})=>{const{data:t,isLoading:r}=me({resource:"dispatch_segments",filters:[{field:"dispatch_id",operator:"eq",value:s}],sorters:[{field:"seq",order:"asc"}],meta:{select:"seq,kind,material_desc,is_return_empty,client:clients(name),address:addresses(city,line1)"}});if(r)return e.jsx("span",{children:"Ładowanie trasy…"});const n=t?.data||[];if(!n.length)return e.jsx("span",{children:"Dokąd: — • Materiał: — • Powrót: — • Dokąd (powrót): —"});n[0];const d=n[n.length-1],l=(a=>a?.client?.name||a?.address?.city||a?.address?.line1||"—")(d),m=n.map(a=>(a.material_desc||"").trim()).filter(Boolean),c=Array.from(new Set(m)),o=c.length>2?`${c.slice(0,2).join(", ")} +${c.length-2}`:c.join(", ")||"—",u=n.some(a=>a.is_return_empty===!0),h=u?"pusto":n.length>1?"ładunek":"—",p=!u&&n.length>1?l:"—";return e.jsxs("span",{children:[e.jsx("b",{children:"Dokąd:"})," ",l," • ",e.jsx("b",{children:"Materiał:"})," ",o," • ",e.jsx("b",{children:"Powrót:"})," ",h," • ",e.jsx("b",{children:"Dokąd (powrót):"})," ",p]})},Fi="dispatches",Ti=["plan","w_drodze","zaladowany","rozladowany","zakonczony","anulowany"],Ai=()=>{const{list:s}=P(),{refineCore:{onFinish:t},register:r,handleSubmit:n,setValue:d,watch:i,formState:{errors:l,isSubmitting:m}}=B({refineCoreProps:{resource:"dispatches",meta:{table:Fi}}});return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("dispatches"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsx(v,{children:e.jsx(k,{title:"Nowy wywóz",description:"Trasa wielopunktowa + zasoby"})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:n(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Tytuł",htmlFor:"title",error:l.title?.message,required:!0,children:e.jsx(N,{id:"title",...r("title",{required:"Wymagane"})})}),e.jsx(j,{label:"Oddział (branch_id)",required:!0,error:l.branch_id?.message,children:e.jsx(q,{resource:"branches",value:i("branch_id"),onChange:c=>d("branch_id",Number(c),{shouldValidate:!0}),renderLabel:c=>`${c.name}${c.city?" — "+c.city:""} (#${c.id})`,placeholder:"Wybierz oddział"})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Status",required:!0,children:e.jsxs(I,{defaultValue:"plan",onValueChange:c=>d("status",c),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz status"})}),e.jsx(V,{children:Ti.map(c=>e.jsx(D,{value:c,children:c},c))})]})}),e.jsx(j,{label:"Start",htmlFor:"start_at",required:!0,children:e.jsx(N,{id:"start_at",type:"datetime-local",...r("start_at",{required:"Wymagane"})})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Koniec",htmlFor:"end_at",children:e.jsx(N,{id:"end_at",type:"datetime-local",...r("end_at")})}),e.jsx("div",{})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Kierowca",children:e.jsx(q,{resource:"users",value:i("driver_id"),onChange:c=>d("driver_id",c),renderLabel:c=>`${c.full_name||c.email} (#${String(c.id).slice(0,8)})`,placeholder:"Wybierz kierowcę (opcjonalnie)"})}),e.jsx(j,{label:"Pojazd",children:e.jsx(q,{resource:"vehicles",value:i("vehicle_id"),onChange:c=>d("vehicle_id",Number(c)),renderLabel:c=>`${c.name}${c.reg_plate?" / "+c.reg_plate:""} (#${c.id})`,placeholder:"Wybierz pojazd (opcjonalnie)"})}),e.jsx(j,{label:"Naczepa / przyczepa",children:e.jsx(q,{resource:"vehicles",value:i("trailer_id"),onChange:c=>d("trailer_id",Number(c)),renderLabel:c=>`${c.name}${c.reg_plate?" / "+c.reg_plate:""} (#${c.id})`,placeholder:"Wybierz naczepę (opcjonalnie)"})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Transport zewnętrzny (CRM: Firmy transportowe)",children:e.jsx(q,{resource:"clients",value:i("external_transport_client_id"),onChange:c=>d("external_transport_client_id",Number(c)),renderLabel:c=>`${c.name}${c.category?" — "+c.category:""} (#${c.id})`,placeholder:"Wybierz firmę (opcjonalnie)"})}),e.jsx(j,{label:"Stawka za fracht",children:e.jsx(N,{type:"number",step:"0.01",...r("freight_rate",{valueAsNumber:!0})})}),e.jsx(j,{label:"Waluta",children:e.jsx(N,{maxLength:3,defaultValue:"PLN",...r("freight_currency")})})]}),e.jsx(j,{label:"Notatki",children:e.jsx(J,{rows:4,...r("notes")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("dispatches"),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:m,children:m?"Tworzenie...":"Utwórz"})]})]})})]})]})},Vi="dispatches",Ii=["plan","w_drodze","zaladowany","rozladowany","zakonczony","anulowany"],Wi=()=>{const{show:s}=P(),{refineCore:{onFinish:t,queryResult:r},register:n,handleSubmit:d,setValue:i,watch:l,formState:{errors:m,isSubmitting:c}}=B({refineCoreProps:{resource:"dispatches",action:"edit",meta:{table:Vi}}}),o=r?.isLoading??!0,u=r?.isError??!1,h=r?.data?.data,p=F({isLoading:o,isError:u});return p||(h?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("dispatches",h.id),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do szczegółów"]}),e.jsx(v,{children:e.jsx(k,{title:"Edycja wywozu",description:`ID: #${h.id}`})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Tytuł",htmlFor:"title",error:m.title?.message,required:!0,children:e.jsx(N,{id:"title",defaultValue:h.title,...n("title",{required:"Wymagane"})})}),e.jsx(j,{label:"Oddział (branch_id)",required:!0,error:m.branch_id?.message,children:e.jsx(q,{resource:"branches",value:l("branch_id")??h.branch_id,onChange:a=>i("branch_id",Number(a),{shouldValidate:!0}),renderLabel:a=>`${a.name}${a.city?" — "+a.city:""} (#${a.id})`,placeholder:"Wybierz oddział"})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Status",required:!0,children:e.jsxs(I,{defaultValue:h.status,onValueChange:a=>i("status",a),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz status"})}),e.jsx(V,{children:Ii.map(a=>e.jsx(D,{value:a,children:a},a))})]})}),e.jsx(j,{label:"Start",htmlFor:"start_at",required:!0,children:e.jsx(N,{id:"start_at",type:"datetime-local",defaultValue:h.start_at?.slice(0,16),...n("start_at",{required:"Wymagane"})})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Koniec",htmlFor:"end_at",children:e.jsx(N,{id:"end_at",type:"datetime-local",defaultValue:h.end_at?.slice(0,16),...n("end_at")})}),e.jsx("div",{})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Kierowca",children:e.jsx(q,{resource:"users",value:l("driver_id")??h.driver_id,onChange:a=>i("driver_id",a),renderLabel:a=>`${a.full_name||a.email} (#${String(a.id).slice(0,8)})`,placeholder:"Wybierz kierowcę (opcjonalnie)"})}),e.jsx(j,{label:"Pojazd",children:e.jsx(q,{resource:"vehicles",value:l("vehicle_id")??h.vehicle_id,onChange:a=>i("vehicle_id",Number(a)),renderLabel:a=>`${a.name}${a.reg_plate?" / "+a.reg_plate:""} (#${a.id})`,placeholder:"Wybierz pojazd (opcjonalnie)"})}),e.jsx(j,{label:"Naczepa / przyczepa",children:e.jsx(q,{resource:"vehicles",value:l("trailer_id")??h.trailer_id,onChange:a=>i("trailer_id",Number(a)),renderLabel:a=>`${a.name}${a.reg_plate?" / "+a.reg_plate:""} (#${a.id})`,placeholder:"Wybierz naczepę (opcjonalnie)"})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Transport zewnętrzny (CRM: Firmy transportowe)",children:e.jsx(q,{resource:"clients",value:l("external_transport_client_id")??h.external_transport_client_id,onChange:a=>i("external_transport_client_id",Number(a)),renderLabel:a=>`${a.name}${a.category?" — "+a.category:""} (#${a.id})`,placeholder:"Wybierz firmę (opcjonalnie)"})}),e.jsx(j,{label:"Stawka za fracht",children:e.jsx(N,{type:"number",step:"0.01",defaultValue:h.freight_rate??void 0,...n("freight_rate",{valueAsNumber:!0})})}),e.jsx(j,{label:"Waluta",children:e.jsx(N,{maxLength:3,defaultValue:h.freight_currency??"PLN",...n("freight_currency")})})]}),e.jsx(j,{label:"Notatki",children:e.jsx(J,{rows:4,defaultValue:h.notes??"",...n("notes")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("dispatches",h.id),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:c,children:c?"Zapisywanie...":"Zapisz"})]})]})})]})]}):null)},Ui="dispatches",Oi=()=>{const{queryResult:s}=re({resource:"dispatches",meta:{table:Ui}}),{list:t,edit:r}=P(),n=s?.isLoading??!0,d=s?.isError??!1,i=s?.data?.data,l=F({isLoading:n,isError:d});return l||(i?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>t("dispatches"),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsxs(v,{children:[e.jsx(k,{title:i.title,description:`ID: #${i.id}`}),e.jsxs(x,{variant:"outline",onClick:()=>r("dispatches",i.id),children:[e.jsx(M,{className:"w-4 h-4 mr-2"})," Edytuj"]})]}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Szczegóły"})}),e.jsxs(S,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{variant:"secondary",children:i.status}),e.jsxs(y,{variant:"outline",children:["oddział #",i.branch_id]}),i.vehicle_id&&e.jsxs(y,{variant:"outline",children:["pojazd #",i.vehicle_id]}),i.trailer_id&&e.jsxs(y,{variant:"outline",children:["naczepa #",i.trailer_id]}),i.external_transport_client_id&&e.jsxs(y,{variant:"outline",children:["zewn. transp. #",i.external_transport_client_id]})]}),e.jsx(O,{}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Start:"})," ",new Date(i.start_at).toLocaleString()]}),i.end_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Koniec:"})," ",new Date(i.end_at).toLocaleString()]}),i.driver_id&&e.jsxs("div",{children:[e.jsx("b",{children:"Kierowca (UUID):"})," ",i.driver_id]}),typeof i.freight_rate=="number"&&e.jsxs("div",{children:[e.jsx("b",{children:"Stawka frachtu:"})," ",i.freight_rate.toFixed(2)," ",i.freight_currency||"PLN"]}),i.notes&&e.jsxs("div",{children:[e.jsx("b",{children:"Notatki:"})," ",i.notes]}),i.created_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Utworzono:"})," ",new Date(i.created_at).toLocaleString()]}),i.updated_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Aktualizacja:"})," ",new Date(i.updated_at).toLocaleString()]})]})]})]})]}):null)},js={name:"dispatches",list:"/admin/hauls",create:"/admin/hauls/create",edit:"/admin/hauls/edit/:id",show:"/admin/hauls/show/:id",meta:{label:"Wywozy"}},Bi=[e.jsx(b,{index:!0,element:e.jsx(Ei,{})},"hauls-index"),e.jsx(b,{path:"create",element:e.jsx(Ai,{})},"hauls-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(Wi,{})},"hauls-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(Oi,{})},"hauls-show")],Mi=["zgloszony","zaakceptowany","odrzucony"],Ki=()=>{const{tableQuery:{data:s,isLoading:t,isError:r},current:n,setCurrent:d,pageSize:i,setFilters:l}=Q({resource:ae,sorters:{initial:[{field:"start_date",order:"desc"}]}}),{create:m,edit:c,show:o}=P(),u=F({isLoading:t,isError:r});if(u)return u;const h=a=>l([{field:"user_email",operator:"contains",value:a}]),p=a=>l(g=>{const w=(g||[]).filter(U=>U.field!=="status");return a?[...w,{field:"status",operator:"eq",value:a}]:w});return e.jsxs($,{children:[e.jsxs(v,{children:[e.jsx(k,{title:"Urlopy",description:"Wnioski urlopowe użytkowników"}),e.jsxs(x,{onClick:()=>m(ae),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Nowy wniosek"]})]}),e.jsxs(v,{className:"gap-3",children:[e.jsx(N,{placeholder:"Szukaj po e-mailu…",className:"max-w-sm",onChange:a=>h(a.target.value)}),e.jsxs(I,{onValueChange:a=>p(a==="__clear__"?void 0:a),children:[e.jsx(A,{className:"w-56",children:e.jsx(W,{placeholder:"Filtr: status"})}),e.jsxs(V,{children:[Mi.map(a=>e.jsx(D,{value:a,children:a},a)),e.jsx(D,{value:"__clear__",children:"Wyczyść filtr"})]})]})]}),e.jsx(_,{children:s?.data?.map(a=>e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(k,{title:a.user_email||a.user_id,description:`${a.start_date} → ${a.end_date}`,variant:"card"})}),e.jsx(S,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsxs(y,{variant:"outline",children:["ID #",a.id]}),e.jsx(y,{variant:a.status==="zaakceptowany"?"secondary":a.status==="odrzucony"?"destructive":"outline",children:a.status}),a.branch_id&&e.jsxs(y,{variant:"outline",children:["oddział #",a.branch_id]})]})}),e.jsx(X,{children:e.jsxs(v,{variant:"start",className:"gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>o(ae,a.id),children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c(ae,a.id),children:e.jsx(M,{className:"w-4 h-4"})})]})})]},a.id))}),e.jsx(ie,{current:n,pageSize:i,total:s?.total||0,setCurrent:d,itemName:"wnioski"})]})},Zi=["zgloszony","zaakceptowany","odrzucony"],Hi=()=>{const{list:s}=P(),{data:t}=Se(),{refineCore:{onFinish:r},register:n,handleSubmit:d,setValue:i,watch:l,formState:{errors:m,isSubmitting:c}}=B({refineCoreProps:{resource:ae}}),o=u=>r({...u,user_id:u.user_id??t?.id,user_email:u.user_email??t?.email});return e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s(ae),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsx(v,{children:e.jsx(k,{title:"Nowy wniosek urlopowy",description:"Utwórz wniosek"})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(o),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Użytkownik",children:e.jsx(q,{resource:"users",value:l("user_id"),onChange:u=>i("user_id",u),renderLabel:u=>`${u.full_name||u.email} (#${String(u.id).slice(0,8)})`,placeholder:"Wybierz użytkownika (opcjonalnie – domyślnie: ja)"})}),e.jsx(j,{label:"Oddział (opcjonalnie)",children:e.jsx(q,{resource:"branches",value:l("branch_id"),onChange:u=>i("branch_id",Number(u)),renderLabel:u=>`${u.name}${u.city?" — "+u.city:""} (#${u.id})`,placeholder:"Wybierz oddział"})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Data od",htmlFor:"start_date",required:!0,children:e.jsx(N,{id:"start_date",type:"date",...n("start_date",{required:"Wymagane"})})}),e.jsx(j,{label:"Data do",htmlFor:"end_date",required:!0,children:e.jsx(N,{id:"end_date",type:"date",...n("end_date",{required:"Wymagane"})})})]}),e.jsx(j,{label:"Status (domyślnie: zgłoszony)",children:e.jsxs(I,{defaultValue:"zgloszony",onValueChange:u=>i("status",u),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz status"})}),e.jsx(V,{children:Zi.map(u=>e.jsx(D,{value:u,children:u},u))})]})}),e.jsx(j,{label:"Uwagi",children:e.jsx(J,{rows:3,...n("notes")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s(ae),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:c||!t?.id,children:c?"Tworzenie...":"Utwórz"})]})]})})]})]})},Qi=["zgloszony","zaakceptowany","odrzucony"],Gi=()=>{const{show:s}=P(),{refineCore:{onFinish:t,queryResult:r},register:n,handleSubmit:d,setValue:i,watch:l,formState:{errors:m,isSubmitting:c}}=B({refineCoreProps:{resource:"vacations",action:"edit"}}),o=r?.isLoading??!0,u=r?.isError??!1,h=r?.data?.data,p=F({isLoading:o,isError:u});return p||(h?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>s("vacations",h.id),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do szczegółów"]}),e.jsx(v,{children:e.jsx(k,{title:"Edycja wniosku urlopowego",description:`ID: #${h.id}`})}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Parametry"})}),e.jsx(S,{children:e.jsxs(K,{onSubmit:d(t),children:[e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Użytkownik",children:e.jsx(q,{resource:"users",value:l("user_id")??h.user_id,onChange:a=>i("user_id",a),renderLabel:a=>`${a.full_name||a.email} (#${String(a.id).slice(0,8)})`,placeholder:"Wybierz użytkownika"})}),e.jsx(j,{label:"Oddział (opcjonalnie)",children:e.jsx(q,{resource:"branches",value:l("branch_id")??h.branch_id,onChange:a=>i("branch_id",Number(a)),renderLabel:a=>`${a.name}${a.city?" — "+a.city:""} (#${a.id})`,placeholder:"Wybierz oddział"})})]}),e.jsxs(_,{variant:"1-2-2",children:[e.jsx(j,{label:"Data od",htmlFor:"start_date",required:!0,children:e.jsx(N,{id:"start_date",type:"date",defaultValue:h.start_date,...n("start_date",{required:"Wymagane"})})}),e.jsx(j,{label:"Data do",htmlFor:"end_date",required:!0,children:e.jsx(N,{id:"end_date",type:"date",defaultValue:h.end_date,...n("end_date",{required:"Wymagane"})})})]}),e.jsx(j,{label:"Status",children:e.jsxs(I,{defaultValue:h.status,onValueChange:a=>i("status",a),children:[e.jsx(A,{children:e.jsx(W,{placeholder:"Wybierz status"})}),e.jsx(V,{children:Qi.map(a=>e.jsx(D,{value:a,children:a},a))})]})}),e.jsx(j,{label:"Uwagi",children:e.jsx(J,{rows:3,defaultValue:h.notes??"",...n("notes")})}),e.jsxs(Z,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>s("vacations",h.id),children:"Anuluj"}),e.jsx(x,{type:"submit",disabled:c,children:c?"Zapisywanie...":"Zapisz"})]})]})})]})]}):null)},Yi=()=>{const{queryResult:s}=re({resource:ae}),{list:t,edit:r}=P(),n=s?.isLoading??!0,d=s?.isError??!1,i=s?.data?.data,l=F({isLoading:n,isError:d});return l||(i?e.jsxs($,{children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>t(ae),children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Powrót do listy"]}),e.jsxs(v,{children:[e.jsx(k,{title:i.user_email||i.user_id,description:`ID: #${i.id}`}),e.jsxs(x,{variant:"outline",onClick:()=>r(ae,i.id),children:[e.jsx(M,{className:"w-4 h-4 mr-2"})," Edytuj"]})]}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Szczegóły"})}),e.jsxs(S,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{variant:i.status==="zaakceptowany"?"secondary":i.status==="odrzucony"?"destructive":"outline",children:i.status}),i.branch_id&&e.jsxs(y,{variant:"outline",children:["oddział #",i.branch_id]})]}),e.jsx(O,{}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Okres:"})," ",i.start_date," → ",i.end_date]}),i.notes&&e.jsxs("div",{children:[e.jsx("b",{children:"Uwagi:"})," ",i.notes]}),i.created_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Utworzono:"})," ",new Date(i.created_at).toLocaleString()]}),i.updated_at&&e.jsxs("div",{children:[e.jsx("b",{children:"Aktualizacja:"})," ",new Date(i.updated_at).toLocaleString()]})]})]})]})]}):null)},ae="hr_vacations",ps={name:ae,list:"/admin/vacations",create:"/admin/vacations/create",edit:"/admin/vacations/edit/:id",show:"/admin/vacations/show/:id",meta:{label:"Urlopy"}},Xi=[e.jsx(b,{index:!0,element:e.jsx(Ki,{})},"vac-index"),e.jsx(b,{path:"create",element:e.jsx(Hi,{})},"vac-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(Gi,{})},"vac-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(Yi,{})},"vac-show")],Ji=()=>{const s=ne();return e.jsxs($,{children:[e.jsx(v,{children:e.jsx(k,{title:"Raporty",description:"Proste raporty i eksporty"})}),e.jsx(_,{children:e.jsxs(z,{className:"hover:shadow-md transition",children:[e.jsx(C,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-4 h-4"})," Aktywność klienta"]})}),e.jsxs(S,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Wydarzenia/zadania powiązane z wybranym klientem w zakresie dat."}),e.jsx(x,{variant:"outline",className:"mt-3",onClick:()=>s("/admin/reports/client-activity"),children:"Otwórz"})]})]})})]})},en=s=>{const t=Object.keys(s[0]||{}),r=n=>`"${String(n??"").replace(/"/g,'""')}"`;return[t.join(","),...s.map(n=>t.map(d=>r(n[d])).join(","))].join(`
`)},sn=()=>{const[s,t]=de.useState(),[r,n]=de.useState(""),[d,i]=de.useState(""),l=de.useMemo(()=>[...s?[{field:"client_id",operator:"eq",value:s}]:[],...r?[{field:"start_at",operator:"gte",value:r}]:[],...d?[{field:"start_at",operator:"lte",value:d}]:[]],[s,r,d]),{tableQuery:m}=Q({resource:"tasks",filters:{permanent:l},pagination:{current:1,pageSize:1e3},sorters:{initial:[{field:"start_at",order:"desc"}]},queryOptions:{enabled:!!s}}),c=m.isLoading,o=m.isError,u=(m.data?.data||[]).map(p=>({id:p.id,title:p.title,type:p.type,status:p.status,branch_id:p.branch_id,start_at:p.start_at,end_at:p.end_at??""})),h=()=>{if(!u.length)return;const p=new Blob([en(u)],{type:"text/csv;charset=utf-8"}),a=URL.createObjectURL(p),g=document.createElement("a");g.href=a,g.download=`client-${s}-activity.csv`,g.style.display="none",document.body.appendChild(g),g.click(),URL.revokeObjectURL(a),document.body.removeChild(g)};return e.jsxs($,{children:[e.jsxs(v,{children:[e.jsx(k,{title:"Raport: Aktywność klienta",description:"Wydarzenia/zadania powiązane z klientem w zakresie dat"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",onClick:()=>m.refetch?.(),disabled:!s||c,children:"Odśwież"}),e.jsx(x,{onClick:h,disabled:!u.length||c,children:"Eksport CSV"})]})]}),e.jsxs(z,{children:[e.jsx(C,{children:e.jsx(E,{children:"Filtry"})}),e.jsxs(S,{children:[e.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[e.jsx(q,{resource:"clients",value:s,onChange:p=>t(p?Number(p):void 0),renderLabel:p=>`${p.name}${p.category?" — "+p.category:""} (#${p.id})`,placeholder:"Wybierz klienta (wymagane)"}),e.jsx(N,{type:"date",value:r,onChange:p=>n(p.target.value),placeholder:"Od"}),e.jsx(N,{type:"date",value:d,onChange:p=>i(p.target.value),placeholder:"Do"})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:"Uwaga: raport ładuje się dopiero po wyborze klienta."})]})]}),e.jsxs(z,{className:"mt-4",children:[e.jsx(C,{children:e.jsxs(E,{children:["Wyniki ",u.length?`(${u.length})`:""]})}),e.jsxs(S,{children:[o&&e.jsx("div",{className:"text-sm text-red-600",children:"Błąd podczas pobierania danych."}),!c&&!u.length&&s&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Brak danych dla wybranych filtrów."}),!s&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Wybierz klienta, aby zobaczyć wyniki."}),c&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Ładowanie…"}),!!u.length&&e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-left border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-3",children:"ID"}),e.jsx("th",{className:"py-2 pr-3",children:"Tytuł"}),e.jsx("th",{className:"py-2 pr-3",children:"Typ"}),e.jsx("th",{className:"py-2 pr-3",children:"Status"}),e.jsx("th",{className:"py-2 pr-3",children:"Oddział"}),e.jsx("th",{className:"py-2 pr-3",children:"Start"}),e.jsx("th",{className:"py-2 pr-3",children:"Koniec"})]})}),e.jsx("tbody",{children:u.map(p=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"py-2 pr-3",children:p.id}),e.jsx("td",{className:"py-2 pr-3",children:p.title}),e.jsx("td",{className:"py-2 pr-3",children:p.type}),e.jsx("td",{className:"py-2 pr-3",children:p.status}),e.jsx("td",{className:"py-2 pr-3",children:p.branch_id}),e.jsx("td",{className:"py-2 pr-3",children:p.start_at}),e.jsx("td",{className:"py-2 pr-3",children:p.end_at})]},p.id))})]})})]})]})]})},gs={name:"reports",list:"/admin/reports",meta:{label:"Raporty"}},an=[e.jsx(b,{index:!0,element:e.jsx(Ji,{})},"reports-index"),e.jsx(b,{path:"client-activity",element:e.jsx(sn,{})},"reports-client")],rn=()=>e.jsx(ce,{children:e.jsxs(b,{element:e.jsx(be,{children:e.jsx(ue,{})}),children:[e.jsx(b,{index:!0,element:e.jsx(G,{to:"dashboard/overview",replace:!0})}),e.jsx(b,{path:"dashboard/overview",element:e.jsx(St,{})}),e.jsx(b,{path:"users",children:si}),e.jsx(b,{path:"branches",children:Mt}),e.jsx(b,{path:"tasks",children:ba}),e.jsx(b,{path:"vehicles",children:_a}),e.jsx(b,{path:"clients",children:La}),e.jsx(b,{path:"containers",children:oi}),e.jsx(b,{path:"calendar",children:ji}),e.jsx(b,{path:"pricelists",children:wi}),e.jsx(b,{path:"equipment",children:Si}),e.jsx(b,{path:"hauls",children:Bi}),e.jsx(b,{path:"maintenances",children:It}),e.jsx(b,{path:"vacations",children:Xi}),e.jsx(b,{path:"reports",children:an}),e.jsx(b,{path:"*",element:e.jsx(G,{to:"/admin/dashboard/overview",replace:!0})})]})}),tn=f.lazy(()=>Promise.resolve({default:rn})),nn=e.jsx(b,{path:"/admin/*",element:e.jsx(oe,{fallback:e.jsx(G,{to:"/login",replace:!0}),children:e.jsx(ye,{expected:"admin",children:e.jsx(f.Suspense,{fallback:e.jsx(we,{text:"Ładowanie panelu administratora...",colorClass:"border-purple-600"}),children:e.jsx(tn,{})})})},"admin-auth")}),Ce=(s,t=[])=>{const{tableQuery:r}=Q({resource:s,filters:t.length?{initial:t}:void 0,pagination:{current:1,pageSize:1}});return{loading:r.isLoading,total:typeof r.data?.total=="number"?r.data.total:void 0}},ln=()=>{const s=Ce("tasks",[{field:"status",operator:"eq",value:"nowe"}]),t=Ce("tasks",[{field:"status",operator:"eq",value:"w_realizacji"}]),r=Ce("clients"),n=Ce("vehicles"),{list:d}=P(),i=({label:m,value:c,loading:o})=>e.jsxs(z,{children:[e.jsx(C,{className:"pb-2",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:m})}),e.jsx(S,{children:e.jsx("div",{className:"text-3xl font-bold",children:o?"…":c??"—"})})]}),l=({label:m,description:c,onClick:o,icon:u})=>e.jsxs(z,{className:"transition hover:shadow-md",children:[e.jsx(C,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[u,m]})}),e.jsx(S,{className:"text-sm text-muted-foreground",children:c}),e.jsx(X,{children:e.jsx(x,{variant:"outline",size:"sm",onClick:o,children:"Przejdź"})})]});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx(k,{title:"Dashboard – Biuro",description:"Szybki podgląd i skróty"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(i,{label:"Zadania: nowe",value:s.total,loading:s.loading}),e.jsx(i,{label:"Zadania: w realizacji",value:t.total,loading:t.loading}),e.jsx(i,{label:"Klienci",value:r.total,loading:r.loading}),e.jsx(i,{label:"Pojazdy",value:n.total,loading:n.loading})]}),e.jsx(O,{}),e.jsxs(_,{children:[e.jsx(l,{label:"Zadania",description:"Lista i plan zadań",onClick:()=>d("tasks"),icon:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(l,{label:"Klienci",description:"Baza klientów",onClick:()=>d("clients"),icon:e.jsx(he,{className:"h-4 w-4"})}),e.jsx(l,{label:"Flota",description:"Pojazdy w systemie",onClick:()=>d("vehicles"),icon:e.jsx(se,{className:"h-4 w-4"})})]})]})},dn=[e.jsx(b,{index:!0,element:e.jsx(ma,{})},"tasks-index"),e.jsx(b,{path:"create",element:e.jsx(ja,{})},"tasks-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(pa,{})},"tasks-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(ga,{})},"tasks-show")],cn=[e.jsx(b,{index:!0,element:e.jsx(ya,{})},"vehicles-index"),e.jsx(b,{path:"create",element:e.jsx(wa,{})},"vehicles-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(fa,{})},"vehicles-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(Na,{})},"vehicles-show")],on=[e.jsx(b,{index:!0,element:e.jsx(ka,{})},"clients-index"),e.jsx(b,{path:"create",element:e.jsx(za,{})},"clients-create"),e.jsx(b,{path:"edit/:id",element:e.jsx(Ca,{})},"clients-edit"),e.jsx(b,{path:"show/:id",element:e.jsx(Sa,{})},"clients-show")],hn=()=>e.jsx(ce,{children:e.jsxs(b,{element:e.jsx(be,{brand:"Backoffice – Biuro",children:e.jsx(ue,{})}),children:[e.jsx(b,{index:!0,element:e.jsx(G,{to:"dashboard/overview",replace:!0})}),e.jsx(b,{path:"dashboard/overview",element:e.jsx(ln,{})}),e.jsx(b,{path:"tasks",children:dn}),e.jsx(b,{path:"vehicles",children:cn}),e.jsx(b,{path:"clients",children:on}),e.jsx(b,{path:"*",element:e.jsx(G,{to:"/biuro/dashboard/overview",replace:!0})})]})}),xn=f.lazy(()=>Promise.resolve({default:hn})),un=e.jsx(b,{path:"/biuro/*",element:e.jsx(oe,{fallback:e.jsx(G,{to:"/login",replace:!0}),children:e.jsx(ye,{expected:"biuro",children:e.jsx(f.Suspense,{fallback:e.jsx(we,{text:"Ładowanie panelu Biura...",colorClass:"border-blue-600"}),children:e.jsx(xn,{})})})},"biuro-auth")}),qe=(s,t=[])=>{const{tableQuery:r}=Q({resource:s,filters:t.length?{initial:t}:void 0,pagination:{current:1,pageSize:1}});return{loading:r.isLoading,total:typeof r.data?.total=="number"?r.data.total:void 0}},Fe=({label:s,value:t,loading:r})=>e.jsxs(z,{children:[e.jsx(C,{className:"pb-2",children:e.jsx(E,{className:"text-sm text-muted-foreground",children:s})}),e.jsx(S,{children:e.jsx("div",{className:"text-3xl font-bold",children:r?"…":t??"—"})})]}),Te=({to:s,label:t,Icon:r,desc:n})=>{const d=ne();return e.jsxs(z,{className:"hover:shadow-md transition",children:[e.jsx(C,{className:"pb-2",children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5 opacity-70"}),t]})}),e.jsxs(S,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:n??"Szybkie przejście do modułu"}),e.jsxs(x,{variant:"outline",size:"sm",className:"mt-3",onClick:()=>d(s),children:["Wejdź ",e.jsx(Ne,{className:"ml-2 h-4 w-4"})]})]})]})},mn=()=>{const s=qe("tasks"),t=qe("vehicles"),r=qe("clients");return e.jsxs($,{children:[e.jsx(v,{children:e.jsx(k,{title:"Dashboard – Logistyk",description:"Podsumowanie pracy i skróty"})}),e.jsxs(_,{children:[e.jsx(Fe,{label:"Zadania",value:s.total,loading:s.loading}),e.jsx(Fe,{label:"Flota",value:t.total,loading:t.loading}),e.jsx(Fe,{label:"Klienci",value:r.total,loading:r.loading})]}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Skróty"}),e.jsxs(_,{children:[e.jsx(Te,{to:"/logistyk/tasks",label:"Zadania",Icon:je,desc:"Plan i realizacja transportów"}),e.jsx(Te,{to:"/logistyk/vehicles",label:"Flota",Icon:se,desc:"Pojazdy i przypisania"}),e.jsx(Te,{to:"/logistyk/clients",label:"Klienci",Icon:he,desc:"Kontrahenci i kontakty"})]})]})]})},jn=()=>e.jsx(ce,{children:e.jsxs(b,{element:e.jsx(be,{brand:"Logistyka",children:e.jsx(ue,{})}),children:[e.jsx(b,{index:!0,element:e.jsx(G,{to:"dashboard/overview",replace:!0})}),e.jsx(b,{path:"dashboard/overview",element:e.jsx(mn,{})}),e.jsx(b,{path:"tasks",children:ba}),e.jsx(b,{path:"vehicles",children:_a}),e.jsx(b,{path:"clients",children:La}),e.jsx(b,{path:"*",element:e.jsx(G,{to:"/logistyk/dashboard/overview",replace:!0})})]})}),pn=f.lazy(()=>Promise.resolve({default:jn})),gn=e.jsx(b,{path:"/logistyk/*",element:e.jsx(oe,{fallback:e.jsx(G,{to:"/login",replace:!0}),children:e.jsx(ye,{expected:"logistyk",children:e.jsx(f.Suspense,{fallback:e.jsx(we,{text:"Ładowanie panelu logistyka...",colorClass:"border-blue-600"}),children:e.jsx(pn,{})})})},"logistyk-auth")}),bn=()=>e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard – Handlowiec"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx("div",{className:"rounded-2xl border p-4 shadow-sm",children:"Nowe leady: 3"}),e.jsx("div",{className:"rounded-2xl border p-4 shadow-sm",children:"Klienci bez aktywności 7d: 4"}),e.jsx("div",{className:"rounded-2xl border p-4 shadow-sm",children:"Spotkania dziś: 2"})]})]}),yn=()=>e.jsx(ce,{children:e.jsxs(b,{element:e.jsx(be,{children:e.jsx(ue,{})}),children:[e.jsx(b,{index:!0,element:e.jsx(G,{to:"dashboard/overview",replace:!0})}),e.jsx(b,{path:"dashboard/overview",element:e.jsx(bn,{})})]})}),wn=f.lazy(()=>Promise.resolve({default:yn})),fn=e.jsx(b,{path:"/handlowiec/*",element:e.jsx(oe,{fallback:e.jsx(G,{to:"/login",replace:!0}),children:e.jsx(ye,{expected:"handlowiec",children:e.jsx(f.Suspense,{fallback:e.jsx(we,{text:"Ładowanie panelu handlowca...",colorClass:"border-purple-600"}),children:e.jsx(wn,{})})})},"handlowiec-auth")}),vn=()=>e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard – Kierowca"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx("div",{className:"rounded-2xl border p-4 shadow-sm",children:"Moje zadania dziś: 3"}),e.jsx("div",{className:"rounded-2xl border p-4 shadow-sm",children:"Pojazd: brak zalogowania"}),e.jsx("div",{className:"rounded-2xl border p-4 shadow-sm",children:"Powiadomienia: 1"})]})]}),Nn=()=>e.jsx(ce,{children:e.jsxs(b,{element:e.jsx(be,{children:e.jsx(ue,{})}),children:[e.jsx(b,{index:!0,element:e.jsx(G,{to:"dashboard/overview",replace:!0})}),e.jsx(b,{path:"dashboard/overview",element:e.jsx(vn,{})})]})}),_n=f.lazy(()=>Promise.resolve({default:Nn})),kn=e.jsx(b,{path:"/kierowca/*",element:e.jsx(oe,{fallback:e.jsx(G,{to:"/login",replace:!0}),children:e.jsx(ye,{expected:"kierowca",children:e.jsx(f.Suspense,{fallback:e.jsx(we,{text:"Ładowanie panelu kierowcy...",colorClass:"border-purple-600"}),children:e.jsx(_n,{})})})},"kierowca-auth")}),zn=()=>e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard – Operator"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx("div",{className:"rounded-2xl border p-4 shadow-sm",children:"Zadania na placu: 5"}),e.jsx("div",{className:"rounded-2xl border p-4 shadow-sm",children:"Zgłoszenia serwisowe: 1"}),e.jsx("div",{className:"rounded-2xl border p-4 shadow-sm",children:"Kontenery do przestawienia: 2"})]})]}),Cn=()=>e.jsx(ce,{children:e.jsxs(b,{element:e.jsx(be,{children:e.jsx(ue,{})}),children:[e.jsx(b,{index:!0,element:e.jsx(G,{to:"dashboard/overview",replace:!0})}),e.jsx(b,{path:"dashboard/overview",element:e.jsx(zn,{})})]})}),Sn=f.lazy(()=>Promise.resolve({default:Cn})),Ln=e.jsx(b,{path:"/operator/*",element:e.jsx(oe,{fallback:e.jsx(G,{to:"/login",replace:!0}),children:e.jsx(ye,{expected:"operator",children:e.jsx(f.Suspense,{fallback:e.jsx(we,{text:"Ładowanie panelu operatora...",colorClass:"border-purple-600"}),children:e.jsx(Sn,{})})})},"operator-auth")}),Rn=f.lazy(()=>_e(()=>import("./NoRolePage-CRMmIJLf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(s=>({default:s.NoRolePage}))),En=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin h-10 w-10 rounded-full border-b-2 border-purple-600"})}),$n=e.jsx(b,{path:"/no-role",element:e.jsx(oe,{fallback:e.jsx(G,{to:"/login",replace:!0}),children:e.jsx(f.Suspense,{fallback:e.jsx(En,{}),children:e.jsx(Rn,{})})},"no-role-auth")}),Pn=[{name:"dashboard",list:"/admin/dashboard/overview",meta:{label:"Dashboard",icon:e.jsx(ge,{className:"h-4 w-4"})}},{...ds,meta:{...ds.meta,icon:e.jsx(Ve,{className:"h-4 w-4"})}},{...ns,meta:{...ns.meta,icon:e.jsx(Gs,{className:"h-4 w-4"})}},{...Oe,meta:{...Oe.meta,icon:e.jsx(je,{className:"h-4 w-4"})}},{...Be,meta:{...Be.meta,icon:e.jsx(se,{className:"h-4 w-4"})}},{...Me,meta:{...Me.meta,icon:e.jsx(he,{className:"h-4 w-4"})}},{...cs,meta:{...cs.meta,icon:e.jsx(Ie,{className:"h-4 w-4"})}},{...os,meta:{...os.meta,icon:e.jsx(Xe,{className:"h-4 w-4"})}},{...hs,meta:{...hs.meta,icon:e.jsx(fr,{className:"h-4 w-4"})}},{...ms,meta:{...ms.meta,icon:e.jsx(Ie,{className:"h-4 w-4"})}},{...js,meta:{...js.meta,icon:e.jsx(se,{className:"h-4 w-4"})}},{...is,meta:{...is.meta,icon:e.jsx(pe,{className:"h-4 w-4"})}},{...ps,meta:{...ps.meta,icon:e.jsx(Xe,{className:"h-4 w-4"})}},{...gs,meta:{...gs.meta,icon:e.jsx(Qe,{className:"h-4 w-4"})}}],Dn=[{name:"dashboard",list:"/biuro/dashboard/overview",meta:{label:"Dashboard",icon:e.jsx(ge,{className:"h-4 w-4"})}},{name:"tasks",list:"/biuro/tasks",create:"/biuro/tasks/create",edit:"/biuro/tasks/edit/:id",show:"/biuro/tasks/show/:id",meta:{label:"Zadania",icon:e.jsx(je,{className:"h-4 w-4"})}},{name:"vehicles",list:"/biuro/vehicles",create:"/biuro/vehicles/create",edit:"/biuro/vehicles/edit/:id",show:"/biuro/vehicles/show/:id",meta:{label:"Flota",icon:e.jsx(se,{className:"h-4 w-4"})}},{name:"clients",list:"/biuro/clients",create:"/biuro/clients/create",edit:"/biuro/clients/edit/:id",show:"/biuro/clients/show/:id",meta:{label:"Klienci",icon:e.jsx(he,{className:"h-4 w-4"})}}],qn=[{name:"dashboard",list:"/logistyk/dashboard/overview",meta:{label:"Dashboard",icon:e.jsx(ge,{className:"h-4 w-4"})}},{...Oe,list:"/logistyk/tasks",create:"/logistyk/tasks/create",edit:"/logistyk/tasks/edit/:id",show:"/logistyk/tasks/show/:id",meta:{label:"Zadania",icon:e.jsx(je,{className:"h-4 w-4"})}},{...Be,list:"/logistyk/vehicles",create:"/logistyk/vehicles/create",edit:"/logistyk/vehicles/edit/:id",show:"/logistyk/vehicles/show/:id",meta:{label:"Flota",icon:e.jsx(se,{className:"h-4 w-4"})}},{...Me,list:"/logistyk/clients",create:"/logistyk/clients/create",edit:"/logistyk/clients/edit/:id",show:"/logistyk/clients/show/:id",meta:{label:"Klienci",icon:e.jsx(he,{className:"h-4 w-4"})}}],Fn=[{name:"dashboard",list:"/handlowiec/dashboard/overview",meta:{label:"Dashboard",icon:e.jsx(ge,{className:"h-4 w-4"})}}],Tn=[{name:"dashboard",list:"/kierowca/dashboard/overview",meta:{label:"Dashboard",icon:e.jsx(ge,{className:"h-4 w-4"})}}],An=[{name:"dashboard",list:"/operator/dashboard/overview",meta:{label:"Dashboard",icon:e.jsx(ge,{className:"h-4 w-4"})}}],Vn=()=>{const s=ne(),[t,r]=f.useState(0),[n,d]=f.useState("");f.useEffect(()=>{const l=()=>r(window.scrollY);return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]);const i=[{name:"Sty",value:180},{name:"Lut",value:210},{name:"Mar",value:230},{name:"Kwi",value:260},{name:"Maj",value:275},{name:"Cze",value:310}];return e.jsxs("div",{className:"min-h-screen bg-white text-foreground",children:[e.jsx("nav",{className:"fixed top-0 w-full z-50 bg-white/80 backdrop-blur-xl border-b border-gray-100",children:e.jsx("div",{className:"container mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-600 to-cyan-700 rounded-xl flex items-center justify-center",children:e.jsx(Je,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-xl font-bold",children:"ScrapMaster"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[e.jsx("a",{href:"#moduly",className:"text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors",children:"Moduły"}),e.jsx("a",{href:"#dla-kogo",className:"text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors",children:"Dla kogo"}),e.jsx("a",{href:"#cennik",className:"text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors",children:"Cennik"}),e.jsx(x,{className:"bg-gray-900 hover:bg-gray-800 text-white text-sm px-6",onClick:()=>s("/login"),children:"Zaloguj się"})]})]})})}),e.jsx("section",{className:"pt-32 pb-20 overflow-hidden",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"grid lg:grid-cols-12 gap-8 items-center",children:[e.jsxs("div",{className:"lg:col-span-5",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 rounded-full mb-8",children:[e.jsx(ve,{className:"w-4 h-4 text-emerald-700"}),e.jsx("span",{className:"text-sm font-medium text-emerald-700",children:"System zarządzania złomowiskiem"})]}),e.jsxs("h1",{className:"text-5xl md:text-6xl font-bold leading-tight mb-6",children:["Operacje, które"," ",e.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-cyan-700",children:"ważą się same"})]}),e.jsx("p",{className:"text-lg text-gray-600 mb-8 leading-relaxed",children:"Kompletny system do obsługi skupu i sprzedaży złomu: waga samochodowa, przyjęcia/wywozy, cenniki frakcji, ewidencja dokumentów i rozliczenia — w jednym miejscu."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-12",children:[e.jsxs(x,{size:"lg",className:"bg-gray-900 hover:bg-gray-800 text-white px-8",onClick:()=>s("/login"),children:["Wypróbuj teraz",e.jsx(Ne,{className:"ml-2 h-4 w-4"})]}),e.jsx(x,{size:"lg",variant:"outline",className:"border-gray-300",children:"Zobacz demo"})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:"310 t"}),e.jsx("div",{className:"text-sm text-gray-500",children:"średnio / m-c"})]}),e.jsx("div",{className:"w-px h-12 bg-gray-200"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:"-32%"}),e.jsx("div",{className:"text-sm text-gray-500",children:"mniej błędów w ważeniu"})]}),e.jsx("div",{className:"w-px h-12 bg-gray-200"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:"2 min"}),e.jsx("div",{className:"text-sm text-gray-500",children:"czas odprawy auta"})]})]})]}),e.jsx("div",{className:"lg:col-span-7",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-emerald-600/5 to-cyan-700/5 rounded-3xl blur-2xl"}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-600 to-cyan-700 rounded-lg flex items-center justify-center",children:e.jsx(ve,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-semibold",children:"Panel operacyjny"})]}),e.jsx(y,{className:"bg-green-50 text-green-700 border-green-200",children:"Połączono z wagą"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(se,{className:"w-5 h-5 text-emerald-700"}),e.jsx("span",{className:"text-xs text-gray-500",children:"+18"})]}),e.jsx("div",{className:"text-2xl font-bold",children:"142"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Wjazdy dzisiaj"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-cyan-100 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(es,{className:"w-5 h-5 text-cyan-700"}),e.jsx("span",{className:"text-xs text-gray-500",children:"PLN"})]}),e.jsx("div",{className:"text-2xl font-bold",children:"4,21"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Śr. cena/kg (mix)"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-amber-700"}),e.jsx("span",{className:"text-xs text-gray-500",children:"0"})]}),e.jsx("div",{className:"text-2xl font-bold",children:"Alarmy"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Zgodność / limity"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-sm font-medium",children:"Przerób (t/m-c)"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Ostatnie 6 miesięcy"})]}),e.jsx(zr,{width:"100%",height:120,children:e.jsxs(Cr,{data:i,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorThroughput",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#059669",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#059669",stopOpacity:0})]})}),e.jsx(Sr,{type:"monotone",dataKey:"value",stroke:"#059669",strokeWidth:2,fill:"url(#colorThroughput)"}),e.jsx(Lr,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:11}}),e.jsx(Rr,{hide:!0})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:"Aktywne zlecenia"}),e.jsx("a",{href:"#",className:"text-emerald-700 hover:underline",children:"Zobacz wszystkie"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-600 to-cyan-700 rounded-lg flex items-center justify-center",children:e.jsx(vr,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Przyjęcie: Złom stalowy (St3)"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Dostawca: Metal-Pol • Brama 2"})]})]}),e.jsx(Ae,{className:"w-4 h-4 text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-600 to-sky-600 rounded-lg flex items-center justify-center",children:e.jsx(se,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Wywóz: Miedź cięta"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Odbiorca: CopperTrade • 12:45"})]})]}),e.jsx(Ae,{className:"w-4 h-4 text-gray-400"})]})]})]})]})]})]})})]})})}),e.jsx("section",{id:"moduly",className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Moduły, które"," ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-cyan-700",children:"upraszczają operacje"})]}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Od wagi po fakturę — pełen przepływ materiału z kontrolą jakości i zgodnością."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{icon:ve,title:"Waga i bilety",desc:"Dwuważenie, auto-pobór z wagi, bilety przyjęcia/wywozu, tary z historii.",grad:"from-emerald-600 to-cyan-700"},{icon:Nr,title:"Magazyn frakcji",desc:"Stany w czasie rzeczywistym, frakcje/klasy, partie i numeracja dostaw.",grad:"from-cyan-700 to-sky-500"},{icon:Ys,title:"Cenniki i reguły",desc:"Ceny wg frakcji, wilgotności, jakości; indeksy rynkowe i marże.",grad:"from-amber-500 to-yellow-500"},{icon:_r,title:"Kontrola jakości",desc:"Zdjęcia z kamer przy wadze, notatki jakościowe, blokady i odrzuty.",grad:"from-violet-600 to-fuchsia-600"},{icon:Qe,title:"Dokumenty i zgodność",desc:"KPO/BDO, WZ/PZ, JPK, rejestry kierowców i kontrahentów, audyty.",grad:"from-slate-700 to-slate-500"},{icon:kr,title:"Analityka",desc:"Marża/kg, straty technologiczne, rotacja frakcji, KPI bram i wag.",grad:"from-teal-600 to-emerald-600"}].map((l,m)=>e.jsxs("div",{className:"group relative bg-white rounded-2xl p-8 hover:shadow-lg transition-all duration-300 cursor-pointer border border-gray-100",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${l.grad}/10 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity`}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${l.grad} rounded-2xl flex items-center justify-center mb-6`,children:e.jsx(l.icon,{className:"w-7 h-7 text-white"})}),e.jsx("h3",{className:"text-xl font-bold mb-3",children:l.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:l.desc}),e.jsxs("div",{className:"flex items-center text-sm text-emerald-700 font-medium",children:["Dowiedz się więcej",e.jsx(Ne,{className:"w-4 h-4 ml-2 transform group-hover:translate-x-1 transition-transform"})]})]})]},m))})]})}),e.jsx("section",{className:"py-20 bg-white",id:"dla-kogo",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-16",children:[e.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Jak to ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-cyan-700",children:"działa"})]}),e.jsx("p",{className:"text-lg text-gray-600",children:"Cztery kroki od wjazdu do rozliczenia"})]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 top-0 bottom-0 w-0.5 bg-gray-200"}),e.jsx("div",{className:"space-y-12",children:[{number:"01",title:"Wjazd i rejestracja",description:"Skan rejestracji, wybór kontrahenta, zlecenie i frakcja.",icon:se,color:"from-emerald-600 to-cyan-700"},{number:"02",title:"Ważenie i kontrola",description:"Auto-odczyt z wagi, zdjęcia z kamer, notatki jakościowe.",icon:ve,color:"from-cyan-700 to-sky-500"},{number:"03",title:"Magazyn i dokumenty",description:"PZ/WZ, KPO/BDO, przyjęcie na partię i aktualizacja stanów.",icon:Ie,color:"from-amber-500 to-yellow-500"},{number:"04",title:"Rozliczenie i analityka",description:"Cenniki, faktury/kwity kasowe, raporty marży i KPI.",icon:es,color:"from-teal-600 to-emerald-600"}].map((l,m)=>e.jsx("div",{className:"relative",children:e.jsxs("div",{className:`flex items-center ${m%2===0?"flex-row":"flex-row-reverse"}`,children:[e.jsxs("div",{className:`w-5/12 ${m%2===0?"text-right pr-8":"text-left pl-8"}`,children:[e.jsxs("div",{className:`inline-flex items-center gap-4 mb-2 ${m%2===0?"flex-row-reverse":""}`,children:[e.jsx("h3",{className:"text-2xl font-bold",children:l.title}),e.jsx("span",{className:"text-4xl font-bold text-gray-200",children:l.number})]}),e.jsx("p",{className:"text-gray-600 text-lg",children:l.description})]}),e.jsx("div",{className:"w-2/12 flex justify-center",children:e.jsx("div",{className:`relative z-10 w-16 h-16 bg-gradient-to-br ${l.color} rounded-2xl flex items-center justify-center shadow-lg`,children:e.jsx(l.icon,{className:"w-8 h-8 text-white"})})}),e.jsx("div",{className:"w-5/12"})]})},m))})]})})]})}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-gray-900 to-gray-800",id:"cennik",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsx("div",{className:"grid md:grid-cols-4 gap-8",children:[{value:"99,95%",label:"Dostępność",icon:Ve},{value:"<2 min",label:"Odprawa auta",icon:se},{value:"0,1 kg",label:"Dokładność zapisu",icon:ve},{value:"4.9/5",label:"Ocena użytkowników",icon:he}].map((l,m)=>e.jsxs("div",{className:"text-center",children:[e.jsx(l.icon,{className:"w-8 h-8 mx-auto mb-4 text-white/60"}),e.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:l.value}),e.jsx("div",{className:"text-sm text-white/60",children:l.label})]},m))})})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsxs("h2",{className:"text-4xl font-bold mb-6",children:["Gotowy na"," ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-cyan-700",children:"pełną kontrolę"}),"?"]}),e.jsx("p",{className:"text-lg text-gray-600 mb-8 max-w-2xl mx-auto",children:"Uporządkuj ważenia, dokumenty i rozliczenia. Pierwsze 30 dni gratis."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[e.jsx(N,{type:"email",placeholder:"twoj@email.pl",value:n,onChange:l=>d(l.target.value),className:"max-w-xs h-12"}),e.jsxs(x,{size:"lg",className:"bg-gradient-to-r from-emerald-600 to-cyan-700 hover:opacity-90 text-white px-8 h-12",onClick:()=>s("/login"),children:["Zarejestruj konto",e.jsx(Ne,{className:"ml-2 h-4 w-4"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Bez karty • Anuluj w każdej chwili • Pełny dostęp"})]})})}),e.jsx("footer",{className:"bg-gray-900 text-white py-12",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center",children:e.jsx(Je,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-lg font-bold",children:"ScrapMaster"})]}),e.jsx("div",{className:"text-sm text-white/60",children:"© 2025 ScrapMaster. Wszystkie prawa zastrzeżone."})]})})})]})};console.log("1. Login index.tsx - ładowanie modułu");const In=f.lazy(()=>(console.log("2. Login - rozpoczęcie lazy load"),_e(()=>import("./LoginPage-j9REOJLa.js"),__vite__mapDeps([9,1,2,3,10,7,4,5,6,8])).then(s=>(console.log("3. Login - moduł załadowany",s),s)))),Wn=()=>(console.log("4. Login - renderowanie fallback"),e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Ładowanie logowania..."})]})})),Ra=e.jsx(b,{path:"/login",element:e.jsx(f.Suspense,{fallback:e.jsx(Wn,{}),children:e.jsx(In,{})})});console.log("5. Login module exported",Ra);const Un=f.lazy(()=>_e(()=>import("./RegisterFlow-DYSF4I8j.js"),__vite__mapDeps([11,1,2,3,7,10,4,5,6,8]))),On=()=>e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Przygotowywanie rejestracji..."})]})}),Bn=e.jsx(b,{path:"/register/*",element:e.jsx(f.Suspense,{fallback:e.jsx(On,{}),children:e.jsx(Un,{})})}),Mn=f.lazy(()=>_e(()=>import("./ForgotPasswordPage-G6-LJvUx.js"),__vite__mapDeps([12,1,2,3,10,7,4,5,6,8]))),Kn=()=>e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Ładowanie formularza resetowania..."})]})}),Zn=e.jsx(b,{path:"/forgot-password",element:e.jsx(f.Suspense,{fallback:e.jsx(Kn,{}),children:e.jsx(Mn,{})})}),Hn=f.lazy(()=>_e(()=>import("./UpdatePasswordPage-BNfnt-yp.js"),__vite__mapDeps([13,1,2,3,10,7,4,5,6,8]))),Qn=()=>e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Weryfikacja linku resetowania..."})]})}),Gn=e.jsx(b,{path:"/update-password",element:e.jsx(f.Suspense,{fallback:e.jsx(Qn,{}),children:e.jsx(Hn,{})})}),Yn=new dr({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1,staleTime:300*1e3}}});function Xn({children:s}){const{pathname:t}=Ms(),r=t.split("/")[1],n=r==="admin"?Pn:r==="biuro"?Dn:r==="logistyk"?qn:r==="handlowiec"?Fn:r==="kierowca"?Tn:r==="operator"?An:[];return e.jsx(or,{dataProvider:ur(ee),authProvider:Wr,routerProvider:hr,resources:n,options:{syncWithLocation:!1,warnWhenUnsavedChanges:!0,useNewQueryKeys:!0,disableTelemetry:!0},children:s})}function Jn(){return e.jsx(cr,{client:Yn,children:e.jsx(ar,{children:e.jsx(Xn,{children:e.jsxs(ce,{children:[e.jsx(b,{path:"/",element:e.jsx(Vn,{})}),Ra,Bn,Zn,Gn,$n,nn,un,gn,fn,kn,Ln,e.jsx(b,{path:"*",element:e.jsx(G,{to:"/",replace:!0})})]})})})})}const el=document.getElementById("root"),sl=$r.createRoot(el);sl.render(e.jsxs(de.StrictMode,{children:[e.jsx(Jn,{}),e.jsx(rr,{position:"top-right",richColors:!0,closeButton:!0,duration:4e3,toastOptions:{style:{width:"500px",fontSize:"20px"},className:"sonner-toast"}})]}));export{Or as A,x as B,z as C,K as F,N as I,k as L,C as a,E as b,S as c,Mr as d,aa as e,j as f,Nt as g,Z as h,We as i,ea as j,Xs as l,Js as r,ee as s,sa as u};
