import{j as e}from"./radix-ui-BdNglvg2.js";import{N as k}from"./NarrowCol-DUq-L8Qp.js";import{C as u,b as w,c as p,d as N,e as y,h as v,I as C,A as m,a as d,B as f,i as S}from"./index-BVuyqb0h.js";import{M as g,I as E,ai as P,aC as R,R as b,a6 as F,O as I,a5 as W}from"./ui-utils-CHvRCCKz.js";import{R as i}from"./react-vendor-nLIND2rL.js";import"./refine-core-BpFEoGih.js";import"./utils-C8X7R3D6.js";import"./refine-ui-D3vAG_bA.js";import"./forms-aDucxvuO.js";import"./tables-B_D9J81n.js";const j=({children:s})=>e.jsx(k,{children:s}),L=({email:s,setEmail:r,isLoading:a,error:t,handleSubmit:l})=>e.jsxs(u,{children:[e.jsxs(w,{className:"space-y-1",children:[e.jsx(p,{className:"text-2xl text-center",children:"Resetuj hasło"}),e.jsx(N,{className:"text-center",children:"Wprowadź swój email, aby otrzymać link do resetowania hasła"})]}),e.jsxs(y,{children:[e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{htmlFor:"email",className:"flex items-center",children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Email"]}),e.jsx(C,{id:"email",type:"email",placeholder:"przykład@email.com",value:s,onChange:n=>r(n.target.value),disabled:a,required:!0,autoFocus:!0})]}),e.jsxs(m,{children:[e.jsx(E,{className:"h-4 w-4"}),e.jsxs(d,{className:"text-sm",children:[e.jsx("strong",{children:"Jak to działa?"}),e.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Wyślemy Ci email z linkiem do resetowania hasła"}),e.jsx("li",{children:"Link będzie ważny przez 1 godzinę"}),e.jsx("li",{children:"Po kliknięciu będziesz mógł ustawić nowe hasło"})]})]})]}),t&&e.jsxs(m,{variant:"destructive",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx(d,{children:t})]}),e.jsxs(f,{type:"submit",className:"w-full",disabled:a||!s.trim(),children:[a&&e.jsx(R,{className:"mr-2 h-4 w-4 animate-spin"}),a?"Wysyłanie...":"Wyślij link resetujący"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("a",{href:"/login",className:"text-sm text-blue-600 hover:text-blue-500 inline-flex items-center",children:[e.jsx(b,{className:"mr-1 h-3 w-3"}),"Powrót do logowania"]})})]})]}),A=({email:s})=>{const[r,a]=i.useState(!0),[t,l]=i.useState(60);i.useEffect(()=>{const o=setInterval(()=>{l(c=>c<=1?(a(!1),0):c-1)},1e3);return()=>clearInterval(o)},[]);const n=()=>{a(!0),l(60)};return e.jsxs(u,{children:[e.jsxs(w,{className:"space-y-1",children:[e.jsxs(p,{className:"text-2xl text-center flex items-center justify-center gap-2",children:[e.jsx(F,{className:"h-6 w-6 text-green-500"}),"Email wysłany"]}),e.jsx(N,{className:"text-center",children:"Sprawdź swoją skrzynkę odbiorczą"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs(m,{className:"border-green-200 bg-green-50",children:[e.jsx(g,{className:"h-4 w-4 text-green-600"}),e.jsxs(d,{className:"text-green-800",children:["Wysłaliśmy link do resetowania hasła na adres:",e.jsx("strong",{className:"block mt-1",children:s})]})]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(I,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("p",{children:["Link będzie aktywny przez ",e.jsx("strong",{children:"1 godzinę"})]})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"font-medium mb-2",children:"Nie widzisz emaila?"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:'Sprawdź folder spam lub "Oferty"'}),e.jsx("li",{children:"Upewnij się, że email został wpisany poprawnie"}),e.jsx("li",{children:"Poczekaj kilka minut - email może przyjść z opóźnieniem"})]})]})]}),e.jsxs("div",{className:"pt-4 space-y-3",children:[e.jsxs(f,{variant:"outline",className:"w-full",onClick:n,disabled:r,children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),r?`Wyślij ponownie (${t}s)`:"Wyślij ponownie"]}),e.jsx("div",{className:"text-center",children:e.jsxs("a",{href:"/login",className:"text-sm text-blue-600 hover:text-blue-500 inline-flex items-center",children:[e.jsx(b,{className:"mr-1 h-3 w-3"}),"Powrót do logowania"]})})]})]})]})},D=s=>s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.trim())?null:"Nieprawidłowy format adresu email":"Email jest wymagany",B=()=>{const[s,r]=i.useState(""),[a,t]=i.useState(null),[l,n]=i.useState(!1),[o,c]=i.useState(!1);return{email:s,setEmail:r,isLoading:o,error:a,isSuccess:l,handleSubmit:async z=>{z.preventDefault(),t(null);const x=D(s);if(x){t(x);return}c(!0);const h=await S.sendResetEmail(s);c(!1),h.success?n(!0):t(h.error)}}},V=()=>{const s=B();return s.isSuccess?e.jsx(j,{children:e.jsx(A,{email:s.email})}):e.jsx(j,{children:e.jsx(L,{...s})})};export{V as default};
