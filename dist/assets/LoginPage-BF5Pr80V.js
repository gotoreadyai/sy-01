import{j as e}from"./radix-ui-CFzOGHpw.js";import{w as b,n as f}from"./refine-core-07UiCtt_.js";import{N as v}from"./NarrowCol-CRFR8vwq.js";import{A as N,d as y,C as z,a as C,b as L,e as k,c as S,F as E,f as j,I as p,h as F,B as P,l as M,g as A}from"./index-BPOCB5ma.js";import{R as m,L as x,e as I,p as R,o as B}from"./react-vendor-Crp7TieP.js";import{u as Z,I as D,v as H,w as T,x as V,y as W}from"./ui-utils-ohghcBNL.js";import"./utils-DA8XHnZ8.js";import"./refine-ui-CxmOseGy.js";import"./forms-CRFkyq38.js";import"./tables-BhgJu2_C.js";const g=({children:s})=>e.jsx(v,{children:s}),w=({title:s,message:a})=>e.jsxs(N,{className:"mb-4 border-green-200 bg-green-50",children:[e.jsx(Z,{className:"h-4 w-4 text-green-600"}),e.jsxs(y,{className:"text-green-800",children:[e.jsx("strong",{children:s})," ",a]})]}),q=({error:s})=>{const a=()=>s.includes("nie zostaÅ‚ potwierdzony")?"warning":"destructive",n=()=>s.includes("nie zostaÅ‚ potwierdzony")?D:H;return e.jsxs(N,{variant:a(),children:[m.createElement(n(),{className:"h-4 w-4"}),e.jsxs(y,{children:[e.jsx("strong",{children:"BÅ‚Ä…d logowania:"})," ",s,s.includes("nie zostaÅ‚ potwierdzony")&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsxs("p",{children:["ðŸ’¡ ",e.jsx("strong",{children:"Co robiÄ‡:"})]}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"SprawdÅº swojÄ… skrzynkÄ™ email (takÅ¼e spam)"}),e.jsx("li",{children:"Kliknij link aktywacyjny w emailu"}),e.jsxs("li",{children:["JeÅ›li nie otrzymaÅ‚eÅ› emaila, moÅ¼esz"," ",e.jsx(x,{to:"/resend-confirmation",className:"underline",children:"wysÅ‚aÄ‡ ponownie"})]})]})]}),s.includes("NieprawidÅ‚owe dane")&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsxs("p",{children:["ðŸ’¡ ",e.jsx("strong",{children:"SprawdÅº:"})]}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Czy email jest wpisany poprawnie"}),e.jsx("li",{children:"Czy hasÅ‚o jest poprawne (uwaga na wielkoÅ›Ä‡ liter)"}),e.jsx("li",{children:"Czy masz juÅ¼ zaÅ‚oÅ¼one konto"})]})]})]})]})},J=({email:s,password:a,setEmail:n,setPassword:r,isLoading:i,error:t,handleSubmit:o,isFormValid:c,showVerifiedMessage:l,showPasswordChangedMessage:u})=>e.jsxs(z,{children:[e.jsxs(C,{className:"space-y-1",children:[e.jsx(L,{className:"text-2xl text-center",children:"Zaloguj siÄ™"}),e.jsx(k,{className:"text-center",children:"WprowadÅº swoje dane aby siÄ™ zalogowaÄ‡"})]}),e.jsxs(S,{children:[l&&e.jsx(w,{title:"Email potwierdzony!",message:"MoÅ¼esz siÄ™ teraz zalogowaÄ‡."}),u&&e.jsx(w,{title:"HasÅ‚o zmienione!",message:"MoÅ¼esz siÄ™ zalogowaÄ‡ uÅ¼ywajÄ…c nowego hasÅ‚a."}),e.jsxs(E,{onSubmit:o,children:[e.jsx(j,{label:e.jsxs("span",{className:"flex items-center",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Email"]}),htmlFor:"email",error:t?.toLowerCase().includes("email")?"SprawdÅº poprawnoÅ›Ä‡ adresu email":void 0,required:!0,children:e.jsx(p,{id:"email",type:"email",placeholder:"przykÅ‚ad@email.com",value:s,onChange:d=>n(d.target.value),disabled:i,className:t?.toLowerCase().includes("email")?"border-red-500":""})}),e.jsx(j,{label:e.jsxs("span",{className:"flex items-center",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"HasÅ‚o"]}),htmlFor:"password",error:t?.toLowerCase().includes("hasÅ‚o")?"SprawdÅº poprawnoÅ›Ä‡ hasÅ‚a":void 0,required:!0,children:e.jsx(p,{id:"password",type:"password",placeholder:"WprowadÅº hasÅ‚o",value:a,onChange:d=>r(d.target.value),disabled:i,className:t?.toLowerCase().includes("hasÅ‚o")?"border-red-500":""})}),t&&e.jsx(q,{error:t}),e.jsx(F,{className:"!border-0 !pt-0 justify-center",children:e.jsxs(P,{type:"submit",className:"w-full",disabled:i||!c,children:[i&&e.jsx(W,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Logowanie...":"Zaloguj siÄ™"]})})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"text-center text-sm",children:e.jsx(x,{to:"/register/step1",className:"text-blue-600 hover:text-blue-500 transition-colors",children:"Nie masz konta? Zarejestruj siÄ™"})}),e.jsx("div",{className:"text-center text-sm",children:e.jsx(x,{to:"/forgot-password",className:"text-blue-600 hover:text-blue-500 transition-colors",children:"ZapomniaÅ‚eÅ› hasÅ‚a?"})}),e.jsx("div",{className:"border-t pt-4 mt-4",children:e.jsxs("div",{className:"text-center text-xs text-gray-500",children:[e.jsx("p",{children:"Problemy z logowaniem?"}),e.jsx(x,{to:"/contact",className:"text-blue-600 hover:text-blue-500 transition-colors",children:"Skontaktuj siÄ™ z pomocÄ… technicznÄ…"})]})})]})]})]}),K=()=>{const s=I(),[a,n]=m.useState(""),[r,i]=m.useState(""),[t,o]=m.useState(null),[c,l]=m.useState(!1);return{email:a,password:r,setEmail:n,setPassword:i,isLoading:c,error:t,handleSubmit:async d=>{if(d.preventDefault(),!a.trim()||!r.trim()){o("WypeÅ‚nij wszystkie pola");return}o(null),l(!0);const h=await M.login(a,r);l(!1),h.success?s(h.redirectTo||"/"):o(h.error)},isFormValid:a.trim().length>0&&r.length>0}},ae=()=>{const[s]=R(),{data:a,isLoading:n}=b(),{data:r,isLoading:i}=f(),t=K(),o=s.get("verified")==="true",c=s.get("passwordChanged")==="true";if(n||i)return e.jsx(g,{children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})});if(a&&r){const l=A(r?.role??"");return e.jsx(B,{to:l,replace:!0})}return e.jsx(g,{children:e.jsx(J,{...t,showVerifiedMessage:o,showPasswordChangedMessage:c})})};export{ae as default};
